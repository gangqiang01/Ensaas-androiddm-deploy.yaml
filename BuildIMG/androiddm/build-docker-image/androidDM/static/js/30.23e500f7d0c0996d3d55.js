webpackJsonp([30],{OaqE:function(e,t){},gQMU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("4YfN"),r=a.n(o),i=a("aA9S"),s=a.n(i),l=a("J/qv"),n=a("jnx8"),u=a("22O3"),d=a("yeZF"),c=a("/eZD"),p=a("9rMa"),m={name:"groupList",data:function(){var e=this,t=function(t,a,o){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,12}$/).test(a))return o(new Error(e.$t("global.verifyShortError")));o()},a=function(t,a,o){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,48}$/).test(a))return o(new Error(e.$t("global.verifyDescriptionError")));o()};return{groupType:c.u,groupData:[],dialogDeviceGroupNameVisible:!1,dialogAddDeviceGroupVisible:!1,selectedGroup:"",formLabelWidth:"200px",groupForm:{name:"",desc:""},addGroupForm:{addGroupName:"",addGroupDescription:"",groupType:""},rules:{name:{required:!0,validator:t,trigger:"blur"},desc:{required:!0,validator:a,trigger:"blur"},addGroupName:{required:!0,validator:t,trigger:"blur"},addGroupDescription:{required:!0,validator:a,trigger:"blur"},groupType:{required:!0,trigger:"blur"}},typeArray:[{label:"Android",value:c.u.android},{label:"Linux",value:c.u.linux},{label:"Windows",value:c.u.windows},{label:"Mix",value:c.u.mix}]}},components:{cardTemp:d.a},methods:{getAllDeviceGroups:function(){var e=this;_g.openGlobalLoading(),Object(l.e)().then(function(t){Object(n.a)(t,function(t){"[object Array]"===Object.prototype.toString.call(t)&&(e.groupData=t)})})},editDeviceGroupName:function(){var e=this;this.$refs.groupForm.validate(function(t){t&&(Object(l.c)(e.selectedDeviceGroup,e.groupForm.name,e.groupForm.desc).then(function(t){Object(n.a)(t,function(t){"CHANGED"===t.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.getAllDeviceGroups()}):_g.handleError(t)})}),e.dialogDeviceGroupNameVisible=!1)})},editClick:function(e){var t=this;s()(this.$data.groupForm,this.$options.data().groupForm),Object(l.f)(e).then(function(e){Object(n.a)(e,function(e){_g.isObject(e)&&(t.groupForm=e)})}),this.selectedDeviceGroup=e,this.dialogDeviceGroupNameVisible=!0},addClick:function(){s()(this.$data.addGroupForm,this.$options.data().addGroupForm),this.getGroupType(),this.dialogAddDeviceGroupVisible=!0},deleteGroup:function(e){var t=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){a&&Object(l.b)(e).then(function(e){Object(n.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.getAllDeviceGroups()}):_g.handleError(e)})})})},addDeviceGroup:function(){var e=this;if(Object(u.b)("username")){var t=Object(u.d)("username");this.$refs.addGroupForm.validate(function(a){a&&Object(l.a)(e.addGroupForm.addGroupName,e.addGroupForm.addGroupDescription,t,e.addGroupForm.groupType).then(function(t){Object(n.a)(t,function(t){"CHANGED"===t.status?(e.dialogAddDeviceGroupVisible=!1,e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.getAllDeviceGroups()})):_g.handleError(t)})})})}else this.$swal("",this.$t("global.loginExpired"),"info",{button:this.$t("global.confirm")}).then(function(){e.$router.replace("/")})},handleCommand:function(e){switch(e.id){case"delete":this.deleteGroup(e.name);break;case"edit":this.editClick(e.name)}},back:function(){this.$router.push("/main/device/list")},showDevice:function(e){this.$router.push({name:"deviceList",params:{groupname:e}})},getGroupType:function(){var e=Object(u.d)("apphub_os");if(e){var t=[];JSON.parse(e).forEach(function(e){e==c.u.android?t.push({label:"Android",value:e}):e==c.u.linux?t.push({label:"Linux",value:e}):e==c.u.windows&&t.push({label:"Windows",value:e})}),t.length>1?t.push({label:"Mix",value:c.u.mix}):this.addGroupForm.groupType=t[0].value,this.typeArray=t}}},watch:{osStatusCount:function(){this.getGroupType()}},computed:r()({},Object(p.b)({osStatusCount:"osStatusCount"})),created:function(){this.getAllDeviceGroups()}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"m-t-10 "},[a("p",{staticClass:"header-line"},[a("i",{staticClass:"fa fa-arrow-left m-r-10 pointer c-primary",attrs:{"aria-hidden":"true"},on:{click:function(t){e.back()}}}),e._v(e._s(e.$t("group.groupManager")))])]),e._v(" "),a("div",{staticClass:"m-t-20 card-box"},[a("card-temp",{attrs:{data:e.groupData,isCommon:!0,isShowAdd:!0,width:"190px",height:"210px",headerBg:"#eeffee",bodyDesc:"desc"},on:{addCard:e.addClick},scopedSlots:e._u([{key:"card-header",fn:function(t){return a("div",{staticClass:"card-header cf"},[a("span",{staticClass:"gname"},[e._v(e._s(t.item.name))]),e._v(" "),a("span",{staticClass:"c-success m-l-2 m-r-2"},[e._v(e._s(t.item.online))]),e._v("/"),a("span",{staticClass:"c-primary m-l-2"},[e._v(e._s(t.item.total))]),e._v(" "),a("el-dropdown",{staticClass:"fr pointer",attrs:{trigger:"click",size:"small"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"fa fa-ellipsis-v",attrs:{"aria-hidden":"true"}})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{name:t.item.name,id:"edit"},disabled:"default"===t.item.name}},[a("i",{staticClass:"fa fa-pencil-square-o m-r-5",attrs:{"aria-hidden":"true"}}),e._v("\n                            "+e._s(e.$t("global.rename"))+"\n                        ")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{name:t.item.name,id:"delete"},disabled:"default"===t.item.name}},[a("i",{staticClass:"fa fa-trash-o m-r-7",attrs:{"aria-hidden":"true"}}),e._v("\n                            "+e._s(e.$t("global.delete"))+"\n                        ")])],1)],1)],1)}},{key:"card-body-img",fn:function(t){return a("div",{staticClass:"text-center"},[t.item.type==e.groupType.windows?a("i",{staticClass:"fa fa-windows fa-4x pointer p-b-15 c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){e.showDevice(t.item.name)}}}):e._e(),e._v(" "),t.item.type==e.groupType.linux?a("i",{staticClass:"fa fa-linux fa-4x pointer p-b-15 c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){e.showDevice(t.item.name)}}}):e._e(),e._v(" "),t.item.type==e.groupType.android?a("i",{staticClass:"fa fa-android fa-4x pointer p-b-15 c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){e.showDevice(t.item.name)}}}):e._e(),e._v(" "),t.item.type==e.groupType.mix?a("i",{staticClass:"fa fa-object-group fa-4x pointer p-b-15 c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){e.showDevice(t.item.name)}}}):e._e()])}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogDeviceGroupNameVisible},on:{"update:visible":function(t){e.dialogDeviceGroupNameVisible=t}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-pencil-square-o m-r-10",attrs:{"aria-hidden":"true"}}),e._v("\n            "+e._s(e.$t("group.editGroupName"))+"\n        ")]),e._v(" "),a("el-form",{ref:"groupForm",attrs:{model:e.groupForm,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$t("label.groupName"),"label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{staticClass:"max-w-300",attrs:{autocomplete:"off"},model:{value:e.groupForm.name,callback:function(t){e.$set(e.groupForm,"name","string"==typeof t?t.trim():t)},expression:"groupForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("label.groupDescription"),"label-width":e.formLabelWidth,prop:"desc"}},[a("el-input",{staticClass:"max-w-300",attrs:{autocomplete:"off",type:"textarea",autosize:{minRows:1,maxRows:3}},model:{value:e.groupForm.desc,callback:function(t){e.$set(e.groupForm,"desc",t)},expression:"groupForm.desc"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDeviceGroupNameVisible=!1}}},[e._v(e._s(e.$t("global.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editDeviceGroupName()}}},[e._v(e._s(e.$t("global.confirm")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogAddDeviceGroupVisible},on:{"update:visible":function(t){e.dialogAddDeviceGroupVisible=t}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-plus-square-o m-r-10",attrs:{"aria-hidden":"true"}}),e._v("\n            "+e._s(e.$t("group.addGroup"))+"\n        ")]),e._v(" "),a("el-form",{ref:"addGroupForm",attrs:{model:e.addGroupForm,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$t("label.groupName"),"label-width":e.formLabelWidth,prop:"addGroupName"}},[a("el-input",{staticClass:"max-w-300",attrs:{autocomplete:"off",placeholder:e.$t("group.inputGroupNameHolder")},model:{value:e.addGroupForm.addGroupName,callback:function(t){e.$set(e.addGroupForm,"addGroupName",t)},expression:"addGroupForm.addGroupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("label.groupDescription"),"label-width":e.formLabelWidth,prop:"addGroupDescription"}},[a("el-input",{staticClass:"max-w-300",attrs:{autocomplete:"off",type:"textarea",placeholder:e.$t("group.inputGroupDescriptionHolder"),autosize:{minRows:1,maxRows:3}},model:{value:e.addGroupForm.addGroupDescription,callback:function(t){e.$set(e.addGroupForm,"addGroupDescription",t)},expression:"addGroupForm.addGroupDescription"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("label.groupType"),"label-width":e.formLabelWidth,prop:"groupType"}},[a("el-radio-group",{model:{value:e.addGroupForm.groupType,callback:function(t){e.$set(e.addGroupForm,"groupType",t)},expression:"addGroupForm.groupType"}},e._l(e.typeArray,function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddDeviceGroupVisible=!1}}},[e._v(e._s(e.$t("global.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDeviceGroup()}}},[e._v(e._s(e.$t("global.confirm")))])],1)],1)],1)},staticRenderFns:[]};var b=a("C7Lr")(m,f,!1,function(e){a("OaqE")},"data-v-75ec00be",null);t.default=b.exports}});
//# sourceMappingURL=30.23e500f7d0c0996d3d55.js.map