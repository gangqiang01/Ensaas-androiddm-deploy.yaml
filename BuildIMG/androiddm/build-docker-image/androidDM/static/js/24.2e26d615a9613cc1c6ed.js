webpackJsonp([24],{"1OE/":function(t,e,n){"use strict";var a=n("a3Yh"),s=n.n(a),i={methods:{swalWarnDo:function(t){return swal(s()({title:this.$t("global.areYouSure"),text:t,icon:"warning",buttons:!0,dangerMode:!0},"buttons",[this.$t("global.cancel"),this.$t("global.confirm")]))},swalSuccessDo:function(t){return swal(s()({title:this.$t("global.areYouSure"),text:t,icon:"success",buttons:!0,dangerMode:!0},"buttons",[this.$t("global.cancel"),this.$t("global.confirm")]))},swalErrorDo:function(t){return swal(s()({title:this.$t("global.areYouSure"),text:t,icon:"error",buttons:!0,dangerMode:!0},"buttons",[this.$t("global.cancel"),this.$t("global.confirm")]))},swalInfoDo:function(t){return swal(s()({title:title,text:t,icon:"info",buttons:!0,dangerMode:!0},"buttons",[cancelButtonText,confirmButtonText]))},swalSuccess:function(t){return swal("",t,"success",{button:this.$t("global.confirm")})},swalInfo:function(t){return swal("",t,"info",{button:this.$t("global.confirm")})}}};e.a=i},"ffq+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("4YfN"),s=n.n(a),i=n("jnx8"),o=(n("1OE/"),n("rVsN")),l=n.n(o),r=n("3cXf"),c=n.n(r),u=n("5Y2G"),g=function(t){var e={eids:c()(t)};return new l.a(function(t,n){Object(u.c)("/api/eventMsg/batchdelete",e).then(function(e){t(e)}).catch(function(e){t(e.response)})})},h=n("J/qv"),p=n("C+p8"),v=n("/eZD"),f=n("9rMa"),m={name:"eventMsg",data:function(){return{eventMsgTableList:[],isshow:!1,limit:10,dataCount:0,currentPage:1,multipleSelection:[],isShowBtnGroup:!1,clearLoading:!1,batchDeleteEventMsg:g,typeArray:v.P,groupData:[],groupname:"All",keywords:"",listLoading:!1,eventMsgIconColor:"#303133",realKeywords:"",dateRange:[{label:"eventMsg.week",value:6048e5},{label:"eventMsg.month",value:2592e6},{label:"eventMsg.threeMonth",value:7776e6}],pkgnameTypeList:[{label:"eventMsg.software",value:"software"},{label:"eventMsg.hardware",value:"hardware"},{label:"eventMsg.peripheral",value:"peripheral"},{label:"eventMsg.connect",value:"connect"}],pkgname:"All",eventDate:"All",groupTypeArray:v.u}},components:{btnGroup:p.a},methods:{searchEventMsg:function(t){new RegExp(/^[\u4E00-\u9FA5a-zA-Z0-9\.\-_:]{0,18}$/).test(t)?(this.realKeywords=t,this.eventDate="All",this.pkgname="All",this.groupname="All",this.$refs.eventTable.clearFilter(),this.typeArray=v.P,this.currentPage=1,this.getEventMsgLikeDevname(this.realKeywords)):this.$swal("",this.$t("eventMsg.deviceLikeName"),"info",{button:this.$t("global.confirm")})},getEventMsgLikeDevname:function(t){var e=this;this.listLoading=!0,this.groupname&&"All"!=this.groupname?function(t,e,n,a,s){var i={groupname:t,typeList:c()(e),keywords:n,currentpage:a,limit:s};return new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndKeywordsInGroup",i).then(function(e){t(e)}).catch(function(e){t(e.response)})})}(this.groupname,this.typeArray,t,this.currentPage,this.limit).then(function(t){e.listLoading=!1,Object(i.a)(t,function(t){e.assignEventMsgData(t)})}):function(t,e,n,a){var s={typeList:c()(t),keywords:e,currentpage:n,limit:a};return new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndKeywords",s).then(function(e){t(e)}).catch(function(e){t(e.response)})})}(this.typeArray,t,this.currentPage,this.limit).then(function(t){e.listLoading=!1,Object(i.a)(t,function(t){e.assignEventMsgData(t)})})},selectGroup:function(){this.currentPage=1,this.refreshEventMsg()},selectDate:function(){this.currentPage=1,this.refreshEventMsg()},selectType:function(){this.currentPage=1,this.refreshEventMsg()},refreshEventMsg:function(){this.initData(),this.getEventMsg()},selectItem:function(t){this.multipleSelection=t},handleCurrentChange:function(t){this.currentPage=t||1,this.realKeywords?this.getEventMsgLikeDevname(this.realKeywords):this.getEventMsg()},getAllDeviceGroups:function(){var t=this;Object(h.e)().then(function(e){Object(i.a)(e,function(e){"[object Array]"===Object.prototype.toString.call(e)&&(t.groupData=e)})})},getEventMsg:function(){this.listLoading=!0,"All"===this.groupname?"All"==this.pkgname?"All"==this.eventDate?this.getAllEventMsg():this.getAllEventMsgFromDate():"All"==this.eventDate?this.getAllEventMsgByPkgname():this.getAllEventMsgByPkgnameFromDate():"All"==this.pkgname?"All"==this.eventDate?this.getEventMsgByGroup():this.getEventMsgByGroupFromDate():"All"==this.eventDate?this.getAllEventMsgByGroupAndPkgname():this.getAllEventMsgByGroupAndPkgnameFromDate()},getEventMsgByGroup:function(){var t,e,n,a,s,o=this;this.groupname||console.error("[getAppStatusHistoryByGroupname]groupname is empty"),(t=this.groupname,e=this.typeArray,n=this.currentPage,a=this.limit,s={groupname:t,typeList:c()(e),currentpage:n,limit:a},new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndTypeListInGroup",s).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){o.listLoading=!1,Object(i.a)(t,function(t){o.assignEventMsgData(t)})})},getEventMsgByGroupFromDate:function(){var t,e,n,a,s,o,r=this;this.groupname||console.error("[getAppStatusHistoryByGroupname]groupname is empty"),(t=this.eventDate,e=this.groupname,n=this.typeArray,a=this.currentPage,s=this.limit,o={interval:t,groupname:e,typeList:c()(n),currentpage:a,limit:s},new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndTypeListInGroupFromDate",o).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){r.listLoading=!1,Object(i.a)(t,function(t){r.assignEventMsgData(t)})})},getAllEventMsg:function(){var t,e,n,a,s=this;(t=this.typeArray,e=this.currentPage,n=this.limit,a={typeList:c()(t),currentpage:e,limit:n},new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndTypeList",a).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){s.listLoading=!1,Object(i.a)(t,function(t){s.assignEventMsgData(t)})})},getAllEventMsgFromDate:function(){var t,e,n,a,s,o=this;(t=this.eventDate,e=this.typeArray,n=this.currentPage,a=this.limit,s={interval:t,typeList:c()(e),currentpage:n,limit:a},new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndTypeListFromDate",s).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){o.listLoading=!1,Object(i.a)(t,function(t){o.assignEventMsgData(t)})})},getAllEventMsgByPkgname:function(){var t,e,n,a,s,o=this;(t=this.pkgname,e=this.typeArray,n=this.currentPage,a=this.limit,s={pkgname:t,typeList:c()(e),currentpage:n,limit:a},new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndTypeListAndPkgname",s).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){o.listLoading=!1,Object(i.a)(t,function(t){o.assignEventMsgData(t)})})},getAllEventMsgByPkgnameFromDate:function(){var t,e,n,a,s,o,r=this;(t=this.pkgname,e=this.eventDate,n=this.typeArray,a=this.currentPage,s=this.limit,o={pkgname:t,interval:e,typeList:c()(n),currentpage:a,limit:s},new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndTypeListAndPkgnameFromDate",o).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){r.listLoading=!1,Object(i.a)(t,function(t){r.assignEventMsgData(t)})})},getAllEventMsgByGroupAndPkgname:function(){var t,e,n,a,s,o,r=this;(t=this.groupname,e=this.pkgname,n=this.typeArray,a=this.currentPage,s=this.limit,o={groupname:t,pkgname:e,typeList:c()(n),currentpage:a,limit:s},new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndTypeListAndPkgnameInGroup",o).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){r.listLoading=!1,Object(i.a)(t,function(t){r.assignEventMsgData(t)})})},getAllEventMsgByGroupAndPkgnameFromDate:function(){var t,e,n,a,s,o,r,g=this;(t=this.groupname,e=this.pkgname,n=this.eventDate,a=this.typeArray,s=this.currentPage,o=this.limit,r={groupname:t,pkgname:e,interval:n,typeList:c()(a),currentpage:s,limit:o},new l.a(function(t,e){Object(u.b)("/api/eventMsg/byPageAndTypeListAndPkgnameInGroupFromDate",r).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){g.listLoading=!1,Object(i.a)(t,function(t){g.assignEventMsgData(t)})})},assignEventMsgData:function(t){if("[object Object]"===Object.prototype.toString.call(t)&&"[object Array]"===Object.prototype.toString.call(t.data)){this.dataCount=t.count,this.eventMsgTableList=t.data,this.isshow=this.dataCount>this.limit,this.isShowBtnGroup=this.dataCount>0}},deleteEventMsg:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(n){n&&(e.listLoading=!0,function(t){return new l.a(function(e,n){Object(u.a)("/api/eventMsg/"+t).then(function(t){e(t)}).catch(function(t){e(t.response)})})}(t).then(function(t){e.listLoading=!1,Object(i.a)(t,function(t){"CHANGED"===t.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.refreshEventMsg()}):_g.handleError(t)})}))})},filterEventMsg:function(t){this.keywords="",this.realKeywords="",this.typeArray=t.type,this.currentPage=1,_g.isArray(this.typeArray)&&(0==this.typeArray.length&&(this.typeArray=v.P),this.getEventMsg())},isSuccess:function(t){t&&this.refreshEventMsg()},clearAll:function(){var t=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.clearAll"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(e){var n,a;e&&(t.clearLoading=!0,"All"==t.groupname?(n=t.typeArray,a={typeList:c()(n)},new l.a(function(t,e){Object(u.c)("/api/eventMsg/deleteByTypeList",a).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(e){t.clearLoading=!1,Object(i.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.refreshEventMsg()}):_g.handleError(e)})}):function(t,e){var n={typeList:c()(e),groupname:t};return new l.a(function(t,e){Object(u.c)("/api/eventMsg/deleteByTypeListAndGroup",n).then(function(e){t(e)}).catch(function(e){t(e.response)})})}(t.groupname,t.typeArray).then(function(e){t.clearLoading=!1,Object(i.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.refreshEventMsg()}):_g.handleError(e)})}))})},initData:function(){this.eventMsgTableList=[],this.isShowBtnGroup=!1,this.isshow=!1,this.$refs.eventTable.clearFilter(),this.typeArray=v.P,this.realKeywords="",this.keywords=""}},created:function(){this.getAllDeviceGroups(),this.getEventMsg()},watch:{onlineDeviceCount:function(){this.getEventMsg()}},computed:s()({},Object(f.b)({onlineDeviceCount:"onlineDeviceCount"}))},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-box"},[n("div",{staticClass:"title-box"},[n("p",{staticClass:"header-line"},[n("svg",{staticClass:"icon m-r-10 msg_icon",attrs:{t:"1579405448699",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3895",width:"22",height:"22"}},[n("path",{attrs:{d:"M778.24 430.08H245.76c-11.264 0-20.48 9.216-20.48 20.48v307.2c0 33.792 27.648 61.44 61.44 61.44h450.56c33.792 0 61.44-27.648 61.44-61.44V450.56c0-11.264-9.216-20.48-20.48-20.48zM409.6 716.8c0 11.264-9.216 20.48-20.48 20.48h-40.96c-11.264 0-20.48-9.216-20.48-20.48v-40.96c0-11.264 9.216-20.48 20.48-20.48h40.96c11.264 0 20.48 9.216 20.48 20.48v40.96z m0-143.36c0 11.264-9.216 20.48-20.48 20.48h-40.96c-11.264 0-20.48-9.216-20.48-20.48v-40.96c0-11.264 9.216-20.48 20.48-20.48h40.96c11.264 0 20.48 9.216 20.48 20.48v40.96z m143.36 143.36c0 11.264-9.216 20.48-20.48 20.48h-40.96c-11.264 0-20.48-9.216-20.48-20.48v-40.96c0-11.264 9.216-20.48 20.48-20.48h40.96c11.264 0 20.48 9.216 20.48 20.48v40.96z m0-143.36c0 11.264-9.216 20.48-20.48 20.48h-40.96c-11.264 0-20.48-9.216-20.48-20.48v-40.96c0-11.264 9.216-20.48 20.48-20.48h40.96c11.264 0 20.48 9.216 20.48 20.48v40.96z m143.36 143.36c0 11.264-9.216 20.48-20.48 20.48h-40.96c-11.264 0-20.48-9.216-20.48-20.48v-40.96c0-11.264 9.216-20.48 20.48-20.48h40.96c11.264 0 20.48 9.216 20.48 20.48v40.96z m0-143.36c0 11.264-9.216 20.48-20.48 20.48h-40.96c-11.264 0-20.48-9.216-20.48-20.48v-40.96c0-11.264 9.216-20.48 20.48-20.48h40.96c11.264 0 20.48 9.216 20.48 20.48v40.96z m40.96-307.2h-51.2v-20.48c0-22.528-18.432-40.96-40.96-40.96s-40.96 18.432-40.96 40.96v20.48H419.84v-20.48c0-22.528-18.432-40.96-40.96-40.96s-40.96 18.432-40.96 40.96v20.48h-51.2c-33.792 0-61.44 27.648-61.44 61.44v20.48c0 11.264 9.216 20.48 20.48 20.48h532.48c11.264 0 20.48-9.216 20.48-20.48v-20.48c0-33.792-27.648-61.44-61.44-61.44z","p-id":"3896",fill:t.eventMsgIconColor}})]),t._v("\n            "+t._s(t.$t("eventMsg.eventList"))+"\n        ")])]),t._v(" "),n("div",{staticClass:"select-box"},[n("label",{staticClass:"m-r-5"},[t._v(t._s(t.$t("label.selectGroup")))]),t._v(" "),n("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:t.$t("eventMsg.selectGroupHolder"),size:"small",filterable:""},on:{change:function(e){t.selectGroup()}},model:{value:t.groupname,callback:function(e){t.groupname=e},expression:"groupname"}},[n("el-option",{attrs:{value:"All"}},[t._v("\n                "+t._s(t.$t("global.all"))+"\n            ")]),t._v(" "),t._l(t.groupData,function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}},[n("span",{staticStyle:{float:"left"}},[e.type==t.groupTypeArray.windows?n("i",{staticClass:"fa fa-windows m-r-5",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),e.type==t.groupTypeArray.android?n("i",{staticClass:"fa fa-android m-r-5",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),e.type==t.groupTypeArray.linux?n("i",{staticClass:"fa fa-linux m-r-5",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),e.type==t.groupTypeArray.mix?n("i",{staticClass:"fa fa-object-group m-r-5",attrs:{"aria-hidden":"true"}}):t._e(),t._v("\n                    "+t._s(e.name)+"\n                ")])])})],2),t._v(" "),n("label",{staticClass:"m-r-5 m-l-10"},[t._v(t._s(t.$t("label.selectType")))]),t._v(" "),n("el-select",{staticStyle:{width:"15%"},attrs:{placeholder:t.$t("eventMsg.selectTypeHolder"),size:"small",filterable:""},on:{change:function(e){t.selectType()}},model:{value:t.pkgname,callback:function(e){t.pkgname=e},expression:"pkgname"}},[n("el-option",{attrs:{value:"All"}},[t._v("\n                "+t._s(t.$t("global.all"))+"\n            ")]),t._v(" "),t._l(t.pkgnameTypeList,function(e){return n("el-option",{key:e.value,attrs:{label:t.$t(e.label),value:e.value}})})],2),t._v(" "),n("label",{staticClass:"m-r-5 m-l-10"},[t._v(t._s(t.$t("label.timePeriod")))]),t._v(" "),n("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:t.$t("eventMsg.selectTimePeriodHolder"),size:"small",filterable:""},on:{change:function(e){t.selectDate()}},model:{value:t.eventDate,callback:function(e){t.eventDate=e},expression:"eventDate"}},[n("el-option",{attrs:{value:"All"}},[t._v("\n                "+t._s(t.$t("global.all"))+"\n            ")]),t._v(" "),t._l(t.dateRange,function(e){return n("el-option",{key:e.value,attrs:{label:t.$t(e.label),value:e.value}})})],2),t._v(" "),n("div",{staticClass:"fr m-r-10"},[n("el-input",{staticClass:"max-w-300 m-l-10",attrs:{size:"small",placeholder:t.$t("eventMsg.keywordHolder")},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchEventMsg(t.keywords)}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(e){e.preventDefault(),t.searchEventMsg(t.keywords)}},slot:"append"})],1)],1)],1),t._v(" "),n("div",{staticClass:"table-box"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"eventTable",staticStyle:{width:"100%"},attrs:{id:"eventTable",data:t.eventMsgTableList,"tooltip-effect":"dark","default-sort":{prop:"registrationDate",order:"descending"}},on:{"selection-change":t.selectItem,"filter-change":t.filterEventMsg}},[n("el-table-column",{attrs:{type:"selection","min-width":"50"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("eventMsg.level"),"column-key":"type",prop:"type",filters:[{text:t.$t("global.info"),value:0},{text:t.$t("global.error"),value:1},{text:t.$t("global.warn"),value:2}],"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.type?n("i",{staticClass:"fa fa-exclamation-triangle c-success fa-2x"}):t._e(),t._v(" "),1==e.row.type?n("i",{staticClass:"fa fa-exclamation-triangle c-danger fa-2x"}):t._e(),t._v(" "),2==e.row.type?n("i",{staticClass:"fa fa-exclamation-triangle c-warn fa-2x"}):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"devname",label:t.$t("eventMsg.devname"),"min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"funcId",label:t.$t("eventMsg.type"),"min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"ts",label:t.$t("eventMsg.ts"),"min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("time")(e.row.ts))+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:t.$t("eventMsg.content"),"min-width":"100"}})],1),t._v(" "),n("div",{staticClass:"m-t-10 cf fr"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount,background:""},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),n("btn-group",{directives:[{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf",attrs:{selectedData:t.multipleSelection,isDelete:!0,tid:"eid",delApi:t.batchDeleteEventMsg},on:{result:t.isSuccess}}),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf m-l-10",attrs:{size:"small",type:"primary"},on:{click:function(e){t.clearAll()}}},[t._v("\n        "+t._s(t.$t("global.clearAll"))+"\n        ")])],1)])},staticRenderFns:[]};var b=n("C7Lr")(m,d,!1,function(t){n("tRyk")},"data-v-376bbd6a",null);e.default=b.exports},tRyk:function(t,e){}});
//# sourceMappingURL=24.2e26d615a9613cc1c6ed.js.map