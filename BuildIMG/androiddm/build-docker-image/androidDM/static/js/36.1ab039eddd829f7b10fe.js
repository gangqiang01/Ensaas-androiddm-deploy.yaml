webpackJsonp([36],{EclR:function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"e",function(){return d}),n.d(e,"a",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return u});var s=n("rVsN"),a=n.n(s),r=n("5Y2G"),i=function(t,e,n){return new a.a(function(s,a){var i={name:t,oldpasswd:e,newpasswd:n};Object(r.e)("/api/usermgr/resetPasswd",i).then(function(t){s(t)}).catch(function(t){s(t.response)})})},l=function(t){return new a.a(function(e,n){var s={name:t.username,password:t.password,role:t.addRole};Object(r.c)("/api/usermgr",s).then(function(t){e(t)}).catch(function(t){e(err.response)})})},o=function(t){return new a.a(function(e,n){Object(r.a)("/api/usermgr/"+t).then(function(t){e(t)}).catch(function(t){e(err.response)})})},c=function(t,e){var n={currentpage:t,limit:e};return new a.a(function(t,e){Object(r.b)("/api/usermgr/byPage",n).then(function(e){t(e)}).catch(function(e){t(err.response)})})},u=function(t,e,n){var s={keywords:t,currentpage:e,limit:n};return new a.a(function(t,e){Object(r.b)("/api/usermgr/byPageAndKeywords",s).then(function(e){t(e)}).catch(function(e){t(err.response)})})},d=function(t){var e={name:t};return new a.a(function(t,n){Object(r.b)("/api/usermgr/byname",e).then(function(e){t(e)}).catch(function(e){t(err.response)})})}},bWXy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("EclR"),a=n("jnx8"),r={data:function(){var t=this;return{tableData:[],count:-1,currentPage:1,keywords:"",realKeywords:"",multipleSelection:[],limit:10,dialogAddUserVisible:!1,dialogEditUserRoleVisible:!1,formLabelWidth:"130px",isshow:!1,form:{username:""},rules:{username:{validator:function(e,n,s){if(!new RegExp(/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/).test(n))return s(new Error(t.$t("global.verifyEmailError")));s()},trigger:"blur"}},isLoading:!1}},methods:{handleCurrentChange:function(t){this.currentPage=t||1,this.realKeywords?this.getUserLikeName(this.realKeywords):this.getAllUsers()},deleteUser:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(n){n&&Object(s.b)(t).then(function(t){Object(a.a)(t,function(t){"CHANGED"===t.status&&e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.getAllUsers()})})})})},getAllUsers:function(){var t=this;Object(s.d)(this.currentPage,this.limit).then(function(e){Object(a.a)(e,function(e){_g.isObject(e)&&(t.tableData=e.data,t.count=e.count,t.isshow=t.count>t.limit)})})},searchUser:function(){this.realKeywords=this.keywords,this.currentPage=1,this.getUserLikeName(this.realKeywords)},getUserLikeName:function(t){var e=this;Object(s.c)(this.keywords,this.currentPage,this.limit).then(function(t){Object(a.a)(t,function(t){_g.isObject(t)&&(e.tableData=t.data,e.count=t.count,e.isshow=e.count>e.limit)})})},addUser:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.isLoading=!0,Object(s.a)(t.form).then(function(e){Object(a.a)(e,function(e){t.isLoading=!1,"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.getAllUsers()}):_g.handleError(e),t.dialogAddUserVisible=!1})}))})},init:function(){this.getAllUsers()},closeAddDialog:function(){this.form={username:"",password:"",addRole:"1"}}},created:function(){this.init()},watch:{$route:function(t,e){this.init()}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-l-10"},[n("div",{staticClass:"m-t-10 "},[n("p",{staticClass:"header-line"},[n("i",{staticClass:"fa fa-sliders c-blue m-r-10",attrs:{"aria-hidden":"true"}}),t._v("\n            "+t._s(t.$t("user.userList"))+"\n            ")])]),t._v(" "),n("div",{staticClass:"cf panel-header"},[n("div",{staticClass:"fr m-r-10"},[n("el-input",{staticClass:"w-300 m-l-10",attrs:{size:"small",placeholder:t.$t("user.keyword")},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchUser(e)}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchUser},slot:"append"})],1)],1)]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"",width:"60"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("div",[n("i",{staticClass:"fa fa-user c-primary",staticStyle:{fontSize:"21px"}})])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("user.userName"),prop:"name","min-width":"80"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("user.create"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v("\n                        "+t._s(t._f("time")(e.row.ts))+"\n                    ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("user.role"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v("\n                        "+t._s(t._f("roleFunc")(e.row.role))+" \n                    ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("global.action"),"min-width":"165",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger",disabled:0==e.row.role||1==e.row.role},on:{click:function(n){t.deleteUser(e.row.name)}}},[t._v("\n                        "+t._s(t.$t("global.delete"))+"\n                    ")])]}}])})],1),t._v(" "),n("div",{staticClass:"p-t-20 fr"},[n("div",[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.count},on:{"current-change":t.handleCurrentChange}})],1)]),t._v(" "),n("el-button",{staticClass:"fl m-t-10 cf m-l-10 m-b-20",attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogAddUserVisible=!0}}},[t._v("\n            "+t._s(t.$t("global.add"))+"\n        ")]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogAddUserVisible},on:{"update:visible":function(e){t.dialogAddUserVisible=e},close:t.closeAddDialog}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"fa fa-plus-square-o m-r-10",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("user.addUser"))+"\n            ")]),t._v(" "),n("el-form",{ref:"form",staticClass:"m-l-30",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[n("el-form-item",{attrs:{label:t.$t("label.email"),"label-width":t.formLabelWidth,prop:"username"}},[n("el-input",{staticStyle:{width:"320px"},attrs:{autocomplete:"off",placeholder:t.$t("user.emailhold")},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogAddUserVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{type:"primary"},on:{click:function(e){t.addUser()}}},[t._v(t._s(t.$t("global.add")))])],1)],1)],1)},staticRenderFns:[]},l=n("C7Lr")(r,i,!1,null,null,null);e.default=l.exports}});
//# sourceMappingURL=36.1ab039eddd829f7b10fe.js.map