webpackJsonp([6],{"+Ivr":function(t,e){t.exports="data:image/png;base64,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"},"9fN1":function(t,e){},"9kb/":function(t,e){},AOsJ:function(t,e,a){a("H3hg"),t.exports=a("Rv9F").Object.keys},H3hg:function(t,e,a){var s=a("Myb3"),i=a("E5yg");a("tTxE")("keys",function(){return function(t){return i(s(t))}})},P8cR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("42+z"),i=a("aA9S"),n=a.n(i),o=a("ZLEe"),l=a.n(o),r=a("jwu5"),p=a("jnx8"),d=a("YMj5"),c=a("rVsN"),u=a.n(c),m=a("5Y2G"),b=a("OT2R"),g=(a("6LEk"),function(t){return new u.a(function(e,a){Object(b.c)().then(function(a){var s=a+"/repobsps/boardname/"+t;Object(m.h)(s,"").then(function(t){e(t)}).catch(function(t){e(t.response)})})})}),h=function(t){return new u.a(function(e,a){Object(b.c)().then(function(a){var s=a+"/repobsps/os/"+t;Object(m.h)(s,"").then(function(t){e(t)}).catch(function(t){e(t.response)})})})},f=a("3cXf"),v=a.n(f),y=function(t){return new u.a(function(e,a){Object(m.a)("/api/deploymgr/"+t).then(function(t){e(t)}).catch(function(t){e(t.response)})})},S=function(t){var e={dusids:v()(t)};return new u.a(function(t,a){Object(m.c)("/api/deploymgr/batchdelete",e).then(function(e){t(e)}).catch(function(e){t(e.response)})})},w=(a("9r/T"),a("C+p8")),A=a("22O3"),C=a("/eZD"),U={name:"controlSystemUpdate",data:function(){var t=this;return{dialogDeployNameVisible:!1,activeName:"bspMarket",systemVersion:"",boardName:"",bspVersion:"",platform:"",bspTableData:[],bspHistoryTableList:[],isshow:!1,limit:10,dataCount:0,currentPage:1,multipleSelection:[],isShowBtnGroup:!1,batchDeleteBSPUpdateHistoryApi:S,bspUpdateForm:{bspDownloadPath:"",deployComment:"",deployName:"",updateBSPVersion:""},rules:{deployName:{required:!0,validator:function(e,a,s){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,12}$/).test(a))return s(new Error(t.$t("global.verifyShortError")));s()},trigger:"blur"},deployComment:{required:!0,validator:function(e,a,s){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,48}$/).test(a))return s(new Error(t.$t("global.verifyDescriptionError")));s()},trigger:"blur"}},intervalTime:1e4,clearLoading:!1,listLoading:!1,bspLoading:!1,isInterval:!1,statusArray:[]}},props:{selectedAgentId:{type:String,default:""},isSingleMode:{type:Boolean,default:!0},isOffline:{type:Boolean,default:!1},deviceType:{type:String,default:""}},components:{btnGroup:w.a},methods:{selectItem:function(t){this.multipleSelection=t},checkSelectable:function(t){return 0==!t.updstatus},getDeviceBspInfo:function(){var t=this;if(this.isSingleMode)if(""!=this.selectedAgentId){var e=0,a=l()(r.d).length,s=function(s){t.bspLoading=!0,Object(d.e)(t.selectedAgentId,r.d[s]).then(function(i){t.bspLoading=!1,Object(p.a)(i,function(i){"CONTENT"===i.status&&(t[s]=i.content.value,++e==a&&t.getRepoBSP())})})};for(var i in r.d)s(i)}else console.error("selectedAgentId is empty");else console.error("Cannot operate in a batch mode")},getRepoBSP:function(){var t=this;this.bspLoading=!0,this.deviceType==C.u.android?g(this.boardName).then(function(e){t.bspLoading=!1,Object(p.a)(e,function(e){"success"===e.status&&_g.isArray(e.data)&&(t.bspTableData=e.data)})}):h(this.deviceType).then(function(e){t.bspLoading=!1,Object(p.a)(e,function(e){"success"===e.status&&_g.isArray(e.data)&&(t.bspTableData=e.data)})})},compareBSPVersion:function(t,e){var a=t.split("."),s=e.split(".");if(a[0]===s[0]&&a[1]===s[1]){if(parseInt(a[2])>parseInt(s[2]))return!0;if(parseInt(a[2])==parseInt(s[2])&&parseInt(a[3])>parseInt(s[3]))return!0}return!1},singleBSPUpdate:function(t,e){var a=this;if(this.isSingleMode)if(void 0!==r.a[t]){var s={dpname:this.bspUpdateForm.deployName,dpcomment:this.bspUpdateForm.deployComment,version:this.bspUpdateForm.updateBSPVersion,boardName:this.boardName,bspimagepath:this.bspUpdateForm.bspDownloadPath};Object(d.b)(e,r.a[t],s).then(function(t){Object(p.a)(t,function(t){"CHANGED"===t.status?(a.activeName="bspUpdateHistory",a.intervalGetUpdateBSPStatus()):_g.handleError(t)})})}else this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")});else console.error("Cannot operate in a batch mode")},reBSPUpdate:function(t,e){var a=this;if(this.isSingleMode)if(void 0!==r.a[t]){var s={dpname:this.bspUpdateForm.deployName,dpcomment:this.bspUpdateForm.deployComment,version:this.bspUpdateForm.updateBSPVersion,boardName:this.boardName,bspimagepath:this.bspUpdateForm.bspDownloadPath};this.listLoading=!0,Object(d.g)(e,r.a[t],s).then(function(t){a.listLoading=!1,Object(p.a)(t,function(t){"CHANGED"===t.status?(a.activeName="bspUpdateHistory",a.currentPage=1,a.intervalGetUpdateBSPStatus()):_g.handleError(t)})})}else this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")});else console.error("Cannot operate in a batch mode")},execBSPUpdate:function(t){var e=this;""!==this.selectedAgentId?this.$refs.bspUpdateForm.validate(function(a){a&&(e.singleBSPUpdate(t,e.selectedAgentId),e.dialogDeployNameVisible=!1)}):this.$swal("",this.$t("global.selectDevice"),"info",{button:this.$t("global.confirm")})},redeploy:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("systemUpdate.redeploy"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){a&&(e.bspUpdateForm.deployComment=t.comment,e.bspUpdateForm.deployName=t.deployname,e.bspUpdateForm.updateBSPVersion=t.version,e.bspUpdateForm.bspDownloadPath=t.address,e.boardName=t.boardname,e.reBSPUpdate("updateBSP",t.deviceId))})},checkUpStatusData:function(){var t;t=this.selectedAgentId,new u.a(function(e,a){var s={endpoint:t};Object(m.b)("/api/deploymgr/bydevid",s).then(function(t){e(t)}).catch(function(t){e(t.response)})})},getUpdateBSPStatus:function(){var t,e,a,s,i=this;this.selectedAgentId?(!1===this.isInterval&&(this.listLoading=!0),this.statusArray.length>0?(t=this.selectedAgentId,e=this.currentPage,a=this.limit,s=this.statusArray,new u.a(function(i,n){var o={endpoint:t,currentpage:e,limit:a,status:v()(s)};Object(m.b)("/api/deploymgr/bydevidandpageandstatus",o).then(function(t){i(t)}).catch(function(t){i(t.response)})})).then(function(t){i.listLoading=!1,Object(p.a)(t,function(t){i.assignUpStatus(t)})}):function(t,e,a){return new u.a(function(s,i){var n={endpoint:t,currentpage:e,limit:a};Object(m.b)("/api/deploymgr/bydevidandpage",n).then(function(t){s(t)}).catch(function(t){s(t.response)})})}(this.selectedAgentId,this.currentPage,this.limit).then(function(t){i.listLoading=!1,Object(p.a)(t,function(t){i.assignUpStatus(t)})})):console.error("[getUpdateBSPStatus]selectedAgentId is empty")},assignUpStatus:function(t){if("[object Object]"===Object.prototype.toString.call(t)){this.dataCount=t.count,this.bspHistoryTableList=t.data,this.isshow=this.dataCount>this.limit,this.isShowBtnGroup=this.dataCount>0;var e=!0;t.data.forEach(function(t){0==t.updstatus&&(e=!1)}),e&&(window.clearInterval(_g.timer),_g.timer=null)}else window.clearInterval(_g.timer),_g.timer=null},filterStatus:function(t){this.statusArray=t.updateStatus,this.currentPage=1,_g.isArray(this.statusArray)&&this.intervalGetUpdateBSPStatus()},selectBSP:function(t){""!=this.selectedAgentId?(this.bspUpdateForm.deployName="",this.bspUpdateForm.deployComment="",this.bspUpdateForm.updateBSPVersion=t.versionname,this.bspUpdateForm.bspDownloadPath=t.address,this.dialogDeployNameVisible=!0):this.$swal("",this.$t("global.selectDevice"),"info",{button:this.$t("global.confirm")})},initData:function(){this.systemVersion="",this.boardName="",this.bspVersion="",this.bspTableData=[],this.bspHistoryTableList=[],this.platform="",this.currentPage=1,n()(this.$data.bspUpdateForm,this.$options.data().bspUpdateForm)},handleCurrentChange:function(t){this.currentPage=t||1,this.intervalGetUpdateBSPStatus()},deleteHistory:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){a&&y(t).then(function(t){Object(p.a)(t,function(t){"CHANGED"===t.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.intervalGetUpdateBSPStatus()}):_g.handleError(t)})})})},isSuccess:function(t){t&&this.intervalGetUpdateBSPStatus()},intervalGetUpdateBSPStatus:function(){var t=this;this.getUpdateBSPStatus(),null===_g.timer&&(_g.timer=window.setInterval(function(){t.getUpdateBSPStatus(),t.isInterval=!0},this.intervalTime))},clearAll:function(){var t=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.clearAll"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(e){var a;e&&(t.clearLoading=!0,(a=t.selectedAgentId,new u.a(function(t,e){var s={endpoint:a};Object(m.c)("/api/deploymgr/deleteByDevId",s).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(e){t.clearLoading=!1,Object(p.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.intervalGetUpdateBSPStatus()}):_g.handleError(e)})}))})},handleClick:function(t){"bspUpdateHistory"===t.name?this.$emit("isDisabled",!1):this.$emit("isDisabled",!0)}},beforeDestroy:function(){window.clearInterval(_g.timer),_g.timer=null},watch:{isSingleMode:function(t){t&&this.initData()},selectedAgentId:function(t){this.isSingleMode&&(this.initData(),t&&(this.isOffline||this.getDeviceBspInfo(),this.checkUpStatusData(),this.intervalGetUpdateBSPStatus()))}}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isSingleMode,expression:"isSingleMode"}]},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{name:"bspMarket"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"fa fa-sellsy m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("systemUpdate.systemMarket"))+"\n            ")]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.bspLoading,expression:"bspLoading"}],staticStyle:{width:"100%"},attrs:{data:t.bspTableData,"tooltip-effect":"dark"}},[s("el-table-column",{attrs:{label:"",width:"70"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("div",[s("img",{staticStyle:{width:"38px"},attrs:{src:a("+Ivr"),alt:"no img"}})])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"boardname",label:t.$t("systemUpdate.boardName"),"min-width":"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"versionname",label:t.$t("systemUpdate.buildVersion"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"description",label:t.$t("systemUpdate.description"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.action"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[s("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){t.selectBSP(e.row)}}},[t._v("\n                                "+t._s(t.$t("systemUpdate.deploy"))+"\n                            ")])],1)]}}])})],1)],1),t._v(" "),s("el-tab-pane",{attrs:{name:"bspInfo"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"fa fa-info m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("systemUpdate.systemInfo"))+"\n            ")]),t._v(" "),s("el-form",{staticClass:"m-t-20 m-l-30",attrs:{"label-width":"150px",size:"mini"}},[s("el-form-item",{attrs:{label:t.$t("label.systemVersion")}},[s("el-input",{staticClass:"max-w-300 m-t-5",attrs:{disabled:""},model:{value:t.systemVersion,callback:function(e){t.systemVersion=e},expression:"systemVersion"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("label.boardName")}},[s("el-input",{staticClass:"max-w-300 m-t-5",attrs:{disabled:""},model:{value:t.boardName,callback:function(e){t.boardName=e},expression:"boardName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("label.platformName")}},[s("el-input",{staticClass:"max-w-300 m-t-5",attrs:{disabled:""},model:{value:t.platform,callback:function(e){t.platform=e},expression:"platform"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("label.buildVersion")}},[s("el-input",{staticClass:"max-w-300 m-t-5",attrs:{disabled:""},model:{value:t.bspVersion,callback:function(e){t.bspVersion=e},expression:"bspVersion"}})],1)],1)],1),t._v(" "),s("el-tab-pane",{attrs:{name:"bspUpdateHistory"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"fa fa-history m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("systemUpdate.systemUpdateHistory"))+" \n            ")]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"bspHistoryTable",staticStyle:{width:"100%"},attrs:{data:t.bspHistoryTableList,"tooltip-effect":"dark","default-sort":{prop:"ts",order:"descending"}},on:{"selection-change":t.selectItem,"filter-change":t.filterStatus}},[s("el-table-column",{attrs:{type:"selection","min-width":"50",selectable:t.checkSelectable}}),t._v(" "),s("el-table-column",{attrs:{prop:"devname",label:t.$t("systemUpdate.deviceName"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"deployname",label:t.$t("systemUpdate.deployName"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"comment",label:t.$t("systemUpdate.deployComment"),"min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"boardname",label:t.$t("systemUpdate.boardName"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"version",label:t.$t("systemUpdate.buildVersion"),"min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.beginTime"),"min-width":"120",prop:"ts"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("time")(e.row.ts))+"\n                    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.finishTime"),"min-width":"130",prop:"tsEnd"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("time")(e.row.tsEnd))+"\n                    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{"column-key":"updateStatus",prop:"updstatus",label:t.$t("systemUpdate.updateStatus"),"min-width":"140",filters:[{text:t.$t("global.success"),value:2},{text:t.$t("global.failed"),value:1},{text:t.$t("global.deploying"),value:0}],"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.updstatus?s("img",{staticStyle:{width:"50px",height:"10px"},attrs:{src:a("PLes"),alt:""}}):t._e(),t._v(" "),2==e.row.updstatus?s("span",{staticClass:"badge bg-green"},[t._v(t._s(t.$t("global.success")))]):t._e(),t._v(" "),1==e.row.updstatus?s("span",{staticClass:"badge bg-DimGray"},[t._v(t._s(t.$t("global.failed")))]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.errorStatus"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("BSPErrorStatus")(""+e.row.errorcode))+"\n                    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.action"),"min-width":"175",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[s("el-button-group",[s("el-button",{attrs:{size:"mini",type:"danger",disabled:0==e.row.updstatus},on:{click:function(a){t.deleteHistory(e.row.dusid)}}},[t._v("\n                                        "+t._s(t.$t("global.delete"))+"\n                                ")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"primary",disabled:1!=e.row.updstatus},on:{click:function(a){t.redeploy(e.row)}}},[t._v("\n                                        "+t._s(t.$t("systemUpdate.redeploy"))+"\n                                ")])],1)],1)]}}])})],1),t._v(" "),s("btn-group",{directives:[{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf",attrs:{selectedData:t.multipleSelection,isDelete:!0,isMove:!1,tid:"dusid",delApi:t.batchDeleteBSPUpdateHistoryApi},on:{result:t.isSuccess}}),t._v(" "),s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.clearLoading,expression:"clearLoading"},{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf m-l-10",attrs:{size:"small",type:"primary"},on:{click:function(e){t.clearAll()}}},[t._v("\n            "+t._s(t.$t("global.clearAll"))+"\n            ")]),t._v(" "),s("div",{staticClass:"m-t-10 cf fr"},[s("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount,background:""},on:{"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogDeployNameVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogDeployNameVisible=e}}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"fa fa-level-up m-r-10"}),t._v("\n            "+t._s(t.$t("systemUpdate.systemDeploy"))+"\n        ")]),t._v(" "),s("el-form",{ref:"bspUpdateForm",attrs:{model:t.bspUpdateForm,rules:t.rules}},[s("el-form-item",{attrs:{label:t.$t("label.deployName"),"label-width":"230px",prop:"deployName"}},[s("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:t.$t("systemUpdate.updateSystemDeployName")},model:{value:t.bspUpdateForm.deployName,callback:function(e){t.$set(t.bspUpdateForm,"deployName","string"==typeof e?e.trim():e)},expression:"bspUpdateForm.deployName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("label.deployComment"),"label-width":"230px",prop:"deployComment"}},[s("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:t.$t("systemUpdate.updateSystemComment")},model:{value:t.bspUpdateForm.deployComment,callback:function(e){t.$set(t.bspUpdateForm,"deployComment","string"==typeof e?e.trim():e)},expression:"bspUpdateForm.deployComment"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogDeployNameVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.execBSPUpdate("updateBSP")}}},[t._v(t._s(t.$t("global.confirm")))])],1)],1)],1)},staticRenderFns:[]};var _=a("C7Lr")(U,I,!1,function(t){a("ay1q")},"data-v-2741e6aa",null).exports,D={name:"controlSystemUpdate",data:function(){var t=this;return{dialogDeployNameVisible:!1,activeName:"bspMarket",selectedAgentId:"",bspTableData:[],selectedGroup:"",boardName:"",bspHistoryTableList:[],isshow:!1,limit:10,dataCount:0,currentPage:1,multipleSelection:[],isShowBtnGroup:!1,batchDeleteBSPUpdateHistoryApi:S,bspUpdateForm:{bspDownloadPath:"",deployComment:"",deployName:"",updateBSPVersion:"",boardName:""},rules:{deployName:{required:!0,validator:function(e,a,s){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,12}$/).test(a))return s(new Error(t.$t("global.verifyShortError")));s()},trigger:"blur"},deployComment:{required:!0,validator:function(e,a,s){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,48}$/).test(a))return s(new Error(t.$t("global.verifyDescriptionError")));s()},trigger:"blur"}},isShowOverview:!1,dpname:"",success:0,deploying:0,failed:0,intervalTime:1e4,statusArray:[],clearLoading:!1,listLoading:!1,bspLoading:!1,isInterval:!1}},props:{selectedAgentsData:{type:Array,default:[]},groupname:{type:String,default:""},isSingleMode:{type:Boolean,default:!0},groupType:{type:String,default:""}},components:{btnGroup:w.a},methods:{selectItem:function(t){this.multipleSelection=t},checkSelectable:function(t){return 0==!t.updstatus},getRepoBSP:function(){var t=this;this.isSingleMode?console.error("Cannot operate in a single mode"):0!=this.selectedAgentsData.length?(this.bspLoading=!0,Object(d.e)(this.selectedAgentsData[0].value,r.d.boardName).then(function(e){t.bspLoading=!1,Object(p.a)(e,function(e){"CONTENT"===e.status?(t.bspUpdateForm.boardName=e.content.value,t.bspLoading=!0,t.groupType==C.u.android?g(t.bspUpdateForm.boardName).then(function(e){t.bspLoading=!1,Object(p.a)(e,function(e){"success"===e.status&&_g.isArray(e.data)&&(t.bspTableData=e.data)})}):h(t.groupType).then(function(e){t.bspLoading=!1,Object(p.a)(e,function(e){"success"===e.status&&_g.isArray(e.data)&&(t.bspTableData=e.data)})})):console.error("batch updatebsp: get boardname error")})})):console.error("getRepoBSP: agentData is null")},compareBSPVersion:function(t,e){var a=t.split("."),s=e.split(".");if(a[0]===s[0]&&a[1]===s[1]){if(parseInt(a[2])>parseInt(s[2]))return!0;if(parseInt(a[2])==parseInt(s[2])&&parseInt(a[3])>parseInt(s[3]))return!0}return!1},batchDeployBsp:function(t,e){var a=this;if(this.isSingleMode)console.error("Cannot operate in a single mode");else if(void 0!==r.a[t])if(e){var s=!0,i={groupname:e,dpname:this.bspUpdateForm.deployName,dpcomment:this.bspUpdateForm.deployComment,version:this.bspUpdateForm.updateBSPVersion,boardName:this.bspUpdateForm.boardName,bspimagepath:this.bspUpdateForm.bspDownloadPath};_g.openGlobalLoading(),Object(d.a)(r.a[t],i).then(function(t){Object(p.a)(t,function(t){"CHANGED"===t.status?(Object(A.f)("dpname",a.bspUpdateForm.deployName),a.activeName="bspUpdateHistory",a.intervalGetUpdateBSPStatus()):s&&(_g.handleError(t),s=!1)})})}else console.error("batchDeployBsp: groupname is empty");else this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")})},reDeployBsp:function(t,e){var a=this;if(this.isSingleMode)console.error("Cannot operate in a single mode");else if(void 0!==r.a[t])if("[object Array]"===Object.prototype.toString.call(e)&&e.length>0){var s=!0;e.forEach(function(e){var i={dpname:a.bspUpdateForm.deployName,dpcomment:a.bspUpdateForm.deployComment,version:a.bspUpdateForm.updateBSPVersion,boardName:a.bspUpdateForm.boardName,bspimagepath:a.bspUpdateForm.bspDownloadPath};a.listLoading=!0,Object(d.g)(e.value,r.a[t],i).then(function(t){a.listLoading=!1,Object(p.a)(t,function(t){"CHANGED"===t.status?(Object(A.f)("dpname",a.bspUpdateForm.deployName),a.activeName="bspUpdateHistory",a.currentPage=1,a.intervalGetUpdateBSPStatus()):s&&(_g.handleError(t),s=!1)})})})}else console.error("systemupdate batch: selectedAgentData is not Array");else this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")})},execBSPUpdate:function(t){var e=this;0!==this.selectedAgentsData.length?this.$refs.bspUpdateForm.validate(function(a){a&&(e.batchDeployBsp(t,e.groupname),e.dialogDeployNameVisible=!1)}):this.$swal("",this.$t("global.devicesOffline"),"info",{button:this.$t("global.confirm")})},redeploy:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("systemUpdate.redeploy"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){if(a){e.bspUpdateForm.deployComment=t.comment,e.bspUpdateForm.deployName=t.deployname,e.bspUpdateForm.updateBSPVersion=t.version,e.bspUpdateForm.bspDownloadPath=t.address,e.bspUpdateForm.boardName=t.boardname;var s={value:t.deviceId};e.reDeployBsp("updateBSP",[s])}})},getUpdateBSPStatus:function(){var t,e,a,s,i=this;this.groupname?(!1===this.isInterval&&(this.listLoading=!0),this.statusArray.length>0?(t=this.groupname,e=this.currentPage,a=this.limit,s=this.statusArray,new u.a(function(i,n){var o={groupname:t,currentpage:e,limit:a,status:v()(s)};Object(m.b)("/api/deploymgr/bypageandstatusingroup",o).then(function(t){i(t)}).catch(function(t){i(t.response)})})).then(function(t){i.listLoading=!1,Object(p.a)(t,function(t){i.assignUpStatus(t)})}):function(t,e,a){return new u.a(function(s,i){var n={groupname:t,currentpage:e,limit:a};Object(m.b)("/api/deploymgr/bypageingroup",n).then(function(t){s(t)}).catch(function(t){s(t.response)})})}(this.groupname,this.currentPage,this.limit).then(function(t){i.listLoading=!1,Object(p.a)(t,function(t){i.assignUpStatus(t)})})):console.error("[getUpdateBSPStatus]groupname is empty")},assignUpStatus:function(t){if("[object Object]"===Object.prototype.toString.call(t)){this.dataCount=t.count,this.bspHistoryTableList=t.data,this.isshow=this.dataCount>this.limit,this.isShowBtnGroup=this.dataCount>0;var e=!0;this.getBatchBSPUpdateStatusCount(),t.data.forEach(function(t){0==t.updstatus&&(e=!1)}),e&&(window.clearInterval(_g.timer),_g.timer=null)}else window.clearInterval(_g.timer),_g.timer=null},filterStatus:function(t){this.statusArray=t.updateStatus,this.currentPage=1,_g.isArray(this.statusArray)&&this.intervalGetUpdateBSPStatus()},checkUpStatusData:function(){var t;t=this.groupname,new u.a(function(e,a){var s={groupname:t};Object(m.b)("/api/deploymgr/bygroupname",s).then(function(t){e(t)}).catch(function(t){e(t.response)})})},selectBSP:function(t){0!==this.selectedAgentsData.length?(this.bspUpdateForm.deployName="",this.bspUpdateForm.deployComment="",this.bspUpdateForm.updateBSPVersion=t.versionname,this.bspUpdateForm.bspDownloadPath=t.address,this.dialogDeployNameVisible=!0):this.$swal("",this.$t("global.devicesOffline"),"info",{button:this.$t("global.confirm")})},initData:function(){this.bspTableData=[],this.bspHistoryTableList=[],this.isShowBtnGroup=!1,this.isshow=!1,this.currentPage=1,n()(this.$data.bspUpdateForm,this.$options.data().bspUpdateForm)},handleCurrentChange:function(t){this.currentPage=t||1,this.intervalGetUpdateBSPStatus()},deleteHistory:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){a&&(e.listLoading=!0,y(t).then(function(t){e.listLoading=!1,Object(p.a)(t,function(t){"CHANGED"===t.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.intervalGetUpdateBSPStatus()}):_g.handleError(t)})}))})},getBatchBSPUpdateStatusCount:function(){var t=this,e=Object(A.c)("dpname");if(!e)return console.error("getBatchBSPUpdateStatusCount:localStorage(dpname) is null"),void(this.isShowOverview=!1);(function(t){var e={dpname:t};return new u.a(function(t,a){Object(m.b)("/api/deploymgr/overview",e).then(function(e){t(e)}).catch(function(e){t(e.response)})})})(e).then(function(a){Object(p.a)(a,function(a){a&&(t.dpname=e,t.deploying=a.deploying,t.failed=a.fail,t.success=a.success,t.total>0&&"bspUpdateHistory"===t.activeName?t.isShowOverview=!0:t.isShowOverview=!1)})})},isSuccess:function(t){t&&this.intervalGetUpdateBSPStatus()},handleClick:function(t){"bspUpdateHistory"===t.name?this.getBatchBSPUpdateStatusCount():this.isShowOverview=!1},intervalGetUpdateBSPStatus:function(){var t=this;this.getUpdateBSPStatus(),null===_g.timer&&(_g.timer=window.setInterval(function(){t.getUpdateBSPStatus(),t.isInterval=!0},this.intervalTime))},clearAll:function(){var t=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.clearAll"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(e){var a,s;e&&(t.clearLoading=!0,(a=t.groupname,s={groupname:a},new u.a(function(t,e){Object(m.c)("/api/deploymgr/deleteByGroup",s).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(e){t.clearLoading=!1,Object(p.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.intervalGetUpdateBSPStatus()}):_g.handleError(e)})}))})}},beforeDestroy:function(){window.clearInterval(_g.timer),_g.timer=null},computed:{total:function(){return this.success+this.deploying+this.failed}},watch:{isSingleMode:function(t){t||this.initData()},selectedAgentsData:{handler:function(t){this.isSingleMode||0!=t.length&&this.getRepoBSP()},deep:!0},groupname:function(t){this.isSingleMode||(this.initData(),t&&(this.checkUpStatusData(),this.intervalGetUpdateBSPStatus()))}}},B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSingleMode,expression:"!isSingleMode"}],staticClass:"systemUpdateContent"},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{name:"bspMarket"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"fa fa-sellsy m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("systemUpdate.systemMarket"))+"\n            ")]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.bspLoading,expression:"bspLoading"}],staticStyle:{width:"100%"},attrs:{data:t.bspTableData,"tooltip-effect":"dark"}},[s("el-table-column",{attrs:{label:"",width:"70"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("div",[s("img",{staticStyle:{width:"38px"},attrs:{src:a("+Ivr"),alt:"no img"}})])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"boardname",label:t.$t("systemUpdate.boardName"),"min-width":"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"versionname",label:t.$t("systemUpdate.buildVersion"),"min-width":"120",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"description",label:t.$t("systemUpdate.description"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.action"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[s("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){t.selectBSP(e.row)}}},[t._v("\n                                "+t._s(t.$t("systemUpdate.deploy"))+"\n                            ")])],1)]}}])})],1)],1),t._v(" "),s("el-tab-pane",{attrs:{name:"bspUpdateHistory"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"fa fa-history m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("systemUpdate.systemUpdateHistory"))+" \n            ")]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"bspHistoryTable",staticStyle:{width:"100%"},attrs:{data:t.bspHistoryTableList,"tooltip-effect":"dark","default-sort":{prop:"ts",order:"descending"}},on:{"selection-change":t.selectItem,"filter-change":t.filterStatus}},[s("el-table-column",{attrs:{type:"selection","min-width":"50",selectable:t.checkSelectable}}),t._v(" "),s("el-table-column",{attrs:{prop:"devname",label:t.$t("systemUpdate.deviceName"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"deployname",label:t.$t("systemUpdate.deployName"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"comment",label:t.$t("systemUpdate.deployComment"),"min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"boardname",label:t.$t("systemUpdate.boardName"),"min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"version",label:t.$t("systemUpdate.buildVersion"),"min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.beginTime"),"min-width":"120",prop:"ts"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("time")(e.row.ts))+"\n                    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.finishTime"),"min-width":"130",prop:"tsEnd"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("time")(e.row.tsEnd))+"\n                    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{"column-key":"updateStatus",prop:"updstatus",label:t.$t("systemUpdate.updateStatus"),"min-width":"140",filters:[{text:t.$t("global.success"),value:2},{text:t.$t("global.failed"),value:1},{text:t.$t("global.deploying"),value:0}],"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.updstatus?s("img",{staticStyle:{width:"50px",height:"10px"},attrs:{src:a("PLes"),alt:""}}):t._e(),t._v(" "),2==e.row.updstatus?s("span",{staticClass:"badge bg-green"},[t._v(t._s(t.$t("global.success")))]):t._e(),t._v(" "),1==e.row.updstatus?s("span",{staticClass:"badge bg-DimGray"},[t._v(t._s(t.$t("global.failed")))]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.errorStatus"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("BSPErrorStatus")(""+e.row.errorcode))+"\n                    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("systemUpdate.action"),"min-width":"175",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[s("el-button-group",[s("el-button",{attrs:{size:"mini",type:"danger",disabled:0==e.row.updstatus},on:{click:function(a){t.deleteHistory(e.row.dusid)}}},[t._v("\n                                        "+t._s(t.$t("global.delete"))+"\n                                ")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"primary",disabled:1!=e.row.updstatus},on:{click:function(a){t.redeploy(e.row)}}},[t._v("\n                                        "+t._s(t.$t("systemUpdate.redeploy"))+"\n                                ")])],1)],1)]}}])})],1),t._v(" "),s("btn-group",{directives:[{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf",attrs:{selectedData:t.multipleSelection,isDelete:!0,isMove:!1,tid:"dusid",delApi:t.batchDeleteBSPUpdateHistoryApi},on:{result:t.isSuccess}}),t._v(" "),s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.clearLoading,expression:"clearLoading"},{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf m-l-10",attrs:{size:"small",type:"primary"},on:{click:function(e){t.clearAll()}}},[t._v("\n            "+t._s(t.$t("global.clearAll"))+"\n            ")]),t._v(" "),s("div",{staticClass:"m-t-10 cf fr"},[s("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount,background:""},on:{"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogDeployNameVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogDeployNameVisible=e}}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"fa fa-level-up m-r-10"}),t._v("\n            "+t._s(t.$t("systemUpdate.systemDeploy"))+"\n        ")]),t._v(" "),s("el-form",{ref:"bspUpdateForm",attrs:{model:t.bspUpdateForm,rules:t.rules}},[s("el-form-item",{attrs:{label:t.$t("label.deployName"),"label-width":"230px",prop:"deployName"}},[s("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:t.$t("systemUpdate.updateSystemDeployName")},model:{value:t.bspUpdateForm.deployName,callback:function(e){t.$set(t.bspUpdateForm,"deployName","string"==typeof e?e.trim():e)},expression:"bspUpdateForm.deployName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("label.deployComment"),"label-width":"230px",prop:"deployComment"}},[s("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:t.$t("systemUpdate.updateSystemComment")},model:{value:t.bspUpdateForm.deployComment,callback:function(e){t.$set(t.bspUpdateForm,"deployComment","string"==typeof e?e.trim():e)},expression:"bspUpdateForm.deployComment"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogDeployNameVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.execBSPUpdate("updateBSP")}}},[t._v(t._s(t.$t("global.confirm")))])],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowOverview,expression:"isShowOverview"}],staticClass:"dpStatusCount"},[s("span",[t._v(t._s(t.$t("label.deployName"))+t._s(t.dpname))]),t._v(" "),s("span",[t._v(t._s(t.$t("systemUpdate.total"))+t._s(t.total))]),t._v(" "),s("span",[t._v(t._s(t.$t("systemUpdate.deploying"))+t._s(t.deploying))]),t._v(" "),s("span",[t._v(t._s(t.$t("systemUpdate.success"))+t._s(t.success))]),t._v(" "),s("span",[t._v(t._s(t.$t("systemUpdate.failed"))+t._s(t.failed))])])],1)},staticRenderFns:[]};var E=a("C7Lr")(D,B,!1,function(t){a("9kb/")},"data-v-c5779c78",null).exports,N=a("FM1y"),O=a("HvBW"),x={name:"controlSystemupdate",data:function(){return{selectedAgentId:"",selectedAgentsData:[],isSingleMode:!0,dialogDeployNameVisible:!1,deployName:"",groupname:"",isDisabledOffDev:!0,isOffline:!1,deviceType:"",groupType:"",groupTypeArray:[C.u.android,C.u.linux,C.u.windows]}},components:{selectDevice:s.a,selectGroup:O.a,modeSwitch:N.a,singleControl:_,batchControl:E},methods:{getDeviceOption:function(t){this.selectedAgentId=t},getGroupOption:function(t){this.selectedAgentsData=t},initData:function(){this.selectedAgentId="",this.groupname="",this.selectedAgentsData=[]},changeMode:function(t){this.initData(),this.isSingleMode=!t},getGroupName:function(t){this.groupname=t},isDisabled:function(t){console.log("[isDisabledOffDev]"+t),this.isDisabledOffDev=t},isOfflineDev:function(t){this.isOffline=t},setDeviceType:function(t){this.deviceType=t},setGroupType:function(t){this.groupType=t}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-box"},[a("div",{staticClass:"title-box"},[a("p",{staticClass:"header-line"},[a("i",{staticClass:"fa fa-level-up m-r-10"}),t._v("\n            "+t._s(t.$t("systemUpdate.systemUpdate"))+" \n        ")])]),t._v(" "),a("div",{staticClass:"select-box"},[a("mode-switch",{on:{"mode-status":t.changeMode}}),t._v(" "),a("span",{staticClass:"vertical"}),t._v(" "),a("select-group",{attrs:{isSingleMode:t.isSingleMode,groupType:t.groupTypeArray},on:{"select-getDeviceOptions":t.getGroupOption,"select-getGroupName":t.getGroupName,groupType:t.setGroupType}}),t._v(" "),a("select-device",{attrs:{isSingleMode:t.isSingleMode,isDisabledOffDev:t.isDisabledOffDev},on:{"select-device":t.getDeviceOption,isOfflineDev:t.isOfflineDev,deviceType:t.setDeviceType}}),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.isSingleMode,expression:"!isSingleMode"}],staticClass:"note"},[a("i",[t._v(t._s(t.$t("systemUpdate.note")))]),t._v("\n            "+t._s(t.$t("systemUpdate.noteContent"))+"\n        ")])],1),t._v(" "),a("div",{staticClass:"table-box"},[a("single-control",{attrs:{selectedAgentId:t.selectedAgentId,isSingleMode:t.isSingleMode,deviceType:t.deviceType,isOffline:t.isOffline},on:{isDisabled:t.isDisabled}}),t._v(" "),a("batch-control",{attrs:{selectedAgentsData:t.selectedAgentsData,groupType:t.groupType,groupname:t.groupname,isSingleMode:t.isSingleMode}})],1)])},staticRenderFns:[]};var P=a("C7Lr")(x,$,!1,function(t){a("9fN1")},"data-v-05df6ec7",null);e.default=P.exports},ZLEe:function(t,e,a){t.exports={default:a("AOsJ"),__esModule:!0}},ay1q:function(t,e){},tTxE:function(t,e,a){var s=a("8leu"),i=a("Rv9F"),n=a("9tun");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],o={};o[t]=e(a),s(s.S+s.F*n(function(){a(1)}),"Object",o)}}});
//# sourceMappingURL=6.eb3662278d5047915032.js.map