webpackJsonp([8],{AcRH:function(t,e){},ITB2:function(t,e){},"JMU+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("42+z"),s=a("FM1y"),n=a("HvBW"),o=a("jwu5"),r=a("jnx8"),l=a("YMj5"),c=a("0R+1"),u=a("22O3"),p=a("OT2R"),h=a("/eZD"),d=a("UuJD"),g=a("C+p8"),f={data:function(){return{appStatusHistoryTableList:[],appStatusHistoryTableData:[],isshow:!1,limit:10,dataCount:null,currentPage:1,multipleSelection:[],isShowBtnGroup:!1,clearLoading:!1,batchDeleteAppStatusHistory:d.a,intervalTime:3e3,batchWlType:h.m,listLoading:!1,isInterval:!1,statusArray:[]}},components:{btnGroup:g.a},props:{statusType:{default:h.m,type:String},selectedAgentId:{default:"",type:String},groupname:{default:"",type:String}},methods:{selectItem:function(t){this.multipleSelection=t},checkSelectable:function(t){return 0==!t.status},handleCurrentChange:function(t){this.currentPage=t||1,this.intervalGetAppStatusHistory()},deleteHistory:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){a&&(e.listLoading=!0,Object(d.d)(t).then(function(t){e.listLoading=!1,Object(r.a)(t,function(t){"CHANGED"===t.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.intervalGetAppStatusHistory()}):_g.handleError(t)})}))})},getAppStatusHistoryByGroupname:function(){var t=this;this.groupname||console.error("[getAppStatusHistoryByGroupname]groupname is empty"),!1===this.isInterval&&(this.listLoading=!0),this.statusArray.length>0?Object(d.h)(this.groupname,this.statusType,this.currentPage,this.limit,this.statusArray).then(function(e){t.listLoading=!1,Object(r.a)(e,function(e){t.assignAppTableData(e)})}):Object(d.j)(this.groupname,this.statusType,this.currentPage,this.limit).then(function(e){t.listLoading=!1,Object(r.a)(e,function(e){t.assignAppTableData(e)})})},assignAppTableData:function(t){if("[object Object]"===Object.prototype.toString.call(t)&&"[object Array]"===Object.prototype.toString.call(t.data)){this.dataCount=t.count,this.appStatusHistoryTableList=t.data,this.isshow=this.dataCount>this.limit,this.isShowBtnGroup=this.dataCount>0;var e=!0;this.$emit("getStatusCount"),t.data.forEach(function(t){0==t.status&&(e=!1)}),e&&(this.$emit("isFinished"),window.clearInterval(_g.timer),_g.timer=null)}else window.clearInterval(_g.timer),_g.timer=null},intervalGetAppStatusHistory:function(){var t=this;this.getAppStatusHistoryByGroupname(),null===_g.timer&&(_g.timer=window.setInterval(function(){t.getAppStatusHistoryByGroupname(),t.isInterval=!0},this.intervalTime))},filterStatus:function(t){this.statusArray=t.status,this.currentPage=1,_g.isArray(this.statusArray)&&this.intervalGetAppStatusHistory()},checkAppStatusData:function(){Object(d.f)(this.groupname,this.statusType)},resetAppSensor:function(t,e,a){var i=this;this.listLoading=!0,Object(l.g)(e,t,a).then(function(t){i.listLoading=!1,Object(r.a)(t,function(t){"CHANGED"==t.status?(i.activeName="appStatusHistory",i.currentPage=1,i.intervalGetAppStatusHistory()):_g.handleError(t)})})},reexec:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("appSecurity.reexec"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){if(a){var i={taskname:t.taskname,filename:t.filename,pkgname:t.pkgname,versioncode:t.versioncode,version:t.versionname};e.resetAppSensor(t.target,t.deviceId,i)}})},isSuccess:function(t){t&&this.intervalGetAppStatusHistory()},clearAll:function(){var t=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.clearAll"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(e){e&&(t.clearLoading=!0,Object(d.c)(t.groupname,t.statusType).then(function(e){t.clearLoading=!1,Object(r.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.intervalGetAppStatusHistory()}):_g.handleError(e)})}))})},initData:function(){this.appStatusHistoryTableList=[],this.isShowBtnGroup=!1,this.isshow=!1,this.currentPage=1}},created:function(){this.$emit("getStatusCount")},beforeDestroy:function(){window.clearInterval(_g.timer),_g.timer=null},watch:{groupname:function(t){t&&(this.initData(),this.checkAppStatusData(),this.intervalGetAppStatusHistory())}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"appStatusHistoryTable",staticStyle:{width:"100%"},attrs:{data:t.appStatusHistoryTableList,"tooltip-effect":"dark","default-sort":{prop:"ts",order:"descending"}},on:{"selection-change":t.selectItem,"filter-change":t.filterStatus}},[i("el-table-column",{attrs:{type:"selection","min-width":"50",selectable:t.checkSelectable}}),t._v(" "),i("el-table-column",{attrs:{prop:"devname",label:t.$t("appSecurity.deviceName"),"min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"taskname",label:t.$t("appSecurity.taskName"),"min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"filename",label:t.$t("appSecurity.apkName"),"min-width":"140"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("appSecurity.funName"),"min-width":"130",prop:"target"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("appStatusFunction")(e.row.target))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("appSecurity.time"),"min-width":"130",prop:"ts"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("time")(e.row.ts))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{"column-key":"status",prop:"status",label:t.$t("appSecurity.installStatus"),"min-width":"130",filters:[{text:t.$t("global.success"),value:2},{text:t.$t("global.failed"),value:1},{text:t.$t("global.running"),value:0}],"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?i("img",{staticStyle:{width:"50px",height:"10px"},attrs:{src:a("PLes"),alt:""}}):t._e(),t._v(" "),2==e.row.status?i("span",{staticClass:"badge bg-green"},[t._v(t._s(t.$t("global.success")))]):t._e(),t._v(" "),1==e.row.status?i("span",{staticClass:"badge bg-DimGray"},[t._v(t._s(t.$t("global.failed")))]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("appSecurity.errorStatus"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("appErrorStatus")(""+e.row.errorcode))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("appSecurity.action"),"min-width":"175",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("el-button-group",[i("el-button",{attrs:{size:"mini",type:"danger",disabled:0==e.row.status},on:{click:function(a){t.deleteHistory(e.row.aisid)}}},[t._v("\n                                "+t._s(t.$t("global.delete"))+"\n                        ")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",disabled:1!=e.row.status},on:{click:function(a){t.reexec(e.row)}}},[t._v("\n                                "+t._s(t.$t("appSecurity.reexec"))+"\n                        ")])],1)],1)]}}])})],1),t._v(" "),i("btn-group",{directives:[{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf",attrs:{selectedData:t.multipleSelection,isDelete:!0,isMove:!1,tid:"aisid",delApi:t.batchDeleteAppStatusHistory},on:{result:t.isSuccess}}),t._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.clearLoading,expression:"clearLoading"},{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf m-l-10",attrs:{size:"small",type:"primary"},on:{click:function(e){t.clearAll()}}},[t._v("\n    "+t._s(t.$t("appSecurity.clearAll"))+"\n    ")]),t._v(" "),i("div",{staticClass:"m-t-10 cf fr"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount,background:""},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(f,v,!1,function(t){a("gb6P")},"data-v-0cbd1035",null).exports,w=a("yeZF"),b={name:"controlAppcontrol",data:function(){return{activeName:"whitelist",appTableData:[],defaultImg:'this.src="static/imgs/default_apk.png"',singleInstallType:h.I,appType:"uninstallApp",whitelist:!1,whitelistLoading:!1}},props:{selectedAgentId:{type:String,default:""},isSingleMode:{type:Boolean,default:!0},isOffline:{type:Boolean,default:!1}},components:{appHistory:m,cardTemp:w.a},methods:{getSensorStatus:function(){var t=this;if(this.isSingleMode)if(""!=this.selectedAgentId){var e=[];this.whitelistLoading=!0,Object(l.e)(this.selectedAgentId,o.c.getThirdAppInfo).then(function(a){t.whitelistLoading=!1,Object(r.a)(a,function(a){if(a.content.value){var i=JSON.parse(a.content.value).data;"[object Array]"===Object.prototype.toString.call(i)&&i.length>0&&i.forEach(function(t){if(h.o.indexOf(t.packageName)<0&&"true"!=t.isKioskApp){var a={type:"uninstallApp",appname:t.appName,package:t.packageName,versioncode:t.versionCode,version:t.versionName,inwhitelist:t.inWhiteList,address:"",raid:""};e.push(a)}})}t.getRepoApps(e)})})}else console.error("selectAgentId is empty");else console.error("Cannot operate in a batch mode")},removeObjInArray:function(t,e){"[object Array]"===Object.prototype.toString.call(t)?t.forEach(function(a,i){a.package===e&&t.splice(i,1)}):console.error("data is not array")},getRepoApps:function(t){var e=this;"[object Array]"==Object.prototype.toString.call(t)?(this.whitelistLoading=!0,Object(c.a)().then(function(a){e.whitelistLoading=!1,Object(r.a)(a,function(a){if("success"===a.status){if("[object Array]"!==Object.prototype.toString.call(a.data))return void console.error("data is not array");a.data.forEach(function(e){t.forEach(function(a,i){e.pkgname===a.package&&(t[i].address=e.address,t[i].raid=e.raid)})})}e.appTableData=t})})):console.error("getRepoApps　parameter is not array")},getSrc:function(t){return t?Object(p.d)()+"/getAppIcon/"+t:"static/imgs/default_apk.png"},initData:function(){this.whitelist=!1,this.appTableData=[]},handleWhitelist:function(t,e){var a=this;this.cid=e,this.whitelistLoading=!0,Object(l.h)(this.selectedAgentId,o.c[e],t).then(function(t){a.whitelistLoading=!1,Object(r.a)(t,function(t){"CHANGED"===t.status?a.getSensorStatus():_g.handleError(t)})})},getServerStatus:function(){var t=this;Object(l.e)(this.selectedAgentId,o.b.whitelist).then(function(e){Object(r.a)(e,function(e){if("CONTENT"===e.status){var a=e.content.value;t.whitelist="boolean"==typeof a?a:"true"===a||"false"===a?"true"===a:a}else _g.handleError(e)})})},statusChange:function(t,e){var a=this,i=e,s=o.b[i];void 0!==s?""!=this.selectedAgentId?(_g.openGlobalLoading(),Object(l.h)(this.selectedAgentId,s,t).then(function(t){Object(r.a)(t,function(t){"CHANGED"===t.status?a.$swal("",a.$t("global.success"),"success",{button:a.$t("global.confirm")}).then(function(){a.getServerStatus(),a.getSensorStatus()}):_g.handleError(t)})})):this.$swal("",this.$t("global.selectDevice"),"info",{button:this.$t("global.confirm")}):this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")})}},watch:{isSingleMode:function(t){t&&this.initData()},selectedAgentId:function(t){this.isSingleMode&&(this.initData(),t&&!this.isOffline&&(this.getSensorStatus(),this.getServerStatus()))}},computed:{cardAppData:function(){return this.appTableData},appTypeShow:function(){return this.cardAppData.length>0},subIntro:function(){return["appname","version"]},appTypeArray:function(){return["uninstallApp"]}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-tabs",{directives:[{name:"show",rawName:"v-show",value:t.isSingleMode,expression:"isSingleMode"}],model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.whitelistLoading,expression:"whitelistLoading"}],attrs:{name:"whitelist"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-sliders m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n            "+t._s(t.$t("appSecurity.whitelistManagement"))+"\n        ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.whitelist,expression:"whitelist"}],staticClass:"m-b-20 m-r-15 cf"},[i("el-button",{staticClass:"fr",attrs:{size:"small",type:"warning"},on:{click:function(e){t.statusChange(!1,"whitelist")}}},[i("i",{staticClass:"fa fa-stop m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                    "+t._s(t.$t("appSecurity.disable"))+"\n            ")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.whitelist&&t.appTypeShow,expression:"!whitelist && appTypeShow"}],staticClass:"text-center m-t-80"},[i("p",{staticClass:"m-b-10"},[i("svg",{staticClass:"icon",attrs:{t:"1570849917725",viewBox:"0 0 1170 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3963",width:"165",height:"165"}},[i("path",{attrs:{d:"M1024 73.386667a68.266667 68.266667 0 0 1 73.045333 73.045333v512A68.266667 68.266667 0 0 1 1024 731.477333H146.432a68.266667 68.266667 0 0 1-73.045333-73.045333v-512a68.266667 68.266667 0 0 1 73.045333-73.045333H1024M1024 0H146.432A146.773333 146.773333 0 0 0 0 146.432v512a146.773333 146.773333 0 0 0 146.432 146.432H1024a146.773333 146.773333 0 0 0 146.432-146.432v-512A146.773333 146.773333 0 0 0 1024 0zM731.477333 950.954667v-73.045334h-292.522666v73.045334H219.477333V1024h731.477334v-73.045333h-219.477334z",fill:"#dddddd","p-id":"3964"}}),t._v(" "),i("path",{attrs:{d:"M395.605333 206.848a27.989333 27.989333 0 0 1 8.192 20.48 29.013333 29.013333 0 0 1-8.192 20.821333 30.72 30.72 0 0 1-20.138666 7.850667 27.989333 27.989333 0 0 1-20.48-8.192 25.6 25.6 0 0 1-8.874667-20.48 25.6 25.6 0 0 1 8.874667-20.48 27.648 27.648 0 0 1 20.48-7.850667 30.037333 30.037333 0 0 1 20.138666 7.850667zM808.277333 244.736H451.925333a17.066667 17.066667 0 0 1 0-34.133333h356.352a17.066667 17.066667 0 0 1 0 34.133333zM395.605333 326.314667a27.989333 27.989333 0 0 1 8.192 20.48 29.013333 29.013333 0 0 1-8.192 20.821333 30.72 30.72 0 0 1-20.138666 7.850667 27.989333 27.989333 0 0 1-20.48-8.192 28.330667 28.330667 0 0 1 0-40.96 27.648 27.648 0 0 1 20.48-7.850667 30.037333 30.037333 0 0 1 20.138666 7.850667zM808.277333 363.861333H451.925333a17.066667 17.066667 0 0 1 0-34.133333h356.352a17.066667 17.066667 0 1 1 0 34.133333zM395.605333 445.781333a27.989333 27.989333 0 0 1 8.192 20.48 29.013333 29.013333 0 0 1-8.192 20.821334 30.72 30.72 0 0 1-21.162666 7.850666 27.989333 27.989333 0 0 1-20.48-8.192 28.330667 28.330667 0 0 1 0-40.96 27.648 27.648 0 0 1 20.48-7.850666 30.037333 30.037333 0 0 1 21.162666 7.850666zM808.277333 483.328H451.925333a17.066667 17.066667 0 0 1 0-34.133333h356.352a17.066667 17.066667 0 0 1 0 34.133333zM395.605333 565.248a27.989333 27.989333 0 0 1 8.192 20.48 29.013333 29.013333 0 0 1-8.192 20.821333 30.72 30.72 0 0 1-20.138666 7.850667 27.989333 27.989333 0 0 1-20.48-8.192 28.330667 28.330667 0 0 1 0-40.96 27.648 27.648 0 0 1 20.48-7.850667 30.037333 30.037333 0 0 1 20.138666 7.850667zM638.293333 602.794667h-186.368a17.066667 17.066667 0 0 1 0-34.133334h186.368a17.066667 17.066667 0 0 1 0 34.133334zM764.928 506.538667l16.384 33.109333 36.522667 5.461333-26.624 25.941334 6.485333 36.522666-32.768-17.408-32.768 17.408 6.144-36.522666-26.624-25.941334 36.864-5.461333 16.384-33.109333z",fill:"#dddddd","p-id":"3965"}})])]),t._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){t.statusChange(!0,"whitelist")}}},[i("i",{staticClass:"fa fa-play m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                    "+t._s(t.$t("appSecurity.enable"))+"\n            ")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.appTypeShow,expression:"!appTypeShow"}],staticClass:"text-center noData"},[i("p",[i("img",{attrs:{src:a("OFBL"),alt:""}}),t._v("\n                "+t._s(t.$t("appSecurity.noData"))+"\n            ")])]),t._v(" "),i("card-temp",{directives:[{name:"show",rawName:"v-show",value:t.whitelist,expression:"whitelist"}],attrs:{data:t.cardAppData,subIntro:t.subIntro,isAllShow:!1,typeArray:t.appTypeArray,typeKey:"type",headerBg:"#efefef"},scopedSlots:t._u([{key:"card-header",fn:function(e){return i("div",{staticClass:"card-header cf"},[i("p",{staticClass:"inwhite-icon fl"},["true"==e.item.inwhitelist?i("svg",{staticClass:"icon",attrs:{t:"1570842481397",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10273",width:"18",height:"18"}},[i("path",{attrs:{d:"M741.439426 985.341537a39.231902 39.231902 0 0 1-39.615901 38.655903H161.152877A140.799648 140.799648 0 0 1 21.121227 882.749793V141.311647C21.121227 63.423841 83.96907 0 161.152877 0h599.742501c77.183807 0 139.96765 63.423841 139.96765 141.311647l-0.703998 243.83939a36.991908 36.991908 0 0 1-17.919956 27.583931 37.119907 37.119907 0 0 1-55.231862-27.583931l-0.127999-0.575998c-0.128-1.343997-0.128-2.815993-0.128-4.22399V171.327572c0-52.287869-42.047895-94.847763-93.887765-94.847763H189.056807c-51.775871 0-93.823765 42.559894-93.823765 94.847763v680.190299a94.335764 94.335764 0 0 0 93.823765 94.847763l512.766718 0.255999c21.887945 0 39.615901 17.407956 39.615901 38.719904zM573.695846 397.375007v-0.128a37.887905 37.887905 0 0 0-37.631906-37.951905H230.656703c-20.799948 0-37.695906 17.087957-37.695905 38.079905s16.895958 38.079905 37.695905 38.079904h305.407237a37.887905 37.887905 0 0 0 37.631906-38.079904zM467.328112 541.310647a37.951905 37.951905 0 0 0-37.759906-38.079905H230.656703c-20.799948 0-37.695906 17.087957-37.695905 38.079905s16.895958 38.079905 37.695905 38.079905h198.911503a37.951905 37.951905 0 0 0 37.759906-38.079905z m-236.671409 110.783723a37.887905 37.887905 0 0 0-37.695905 38.015905c0 20.991948 16.895958 38.079905 37.695905 38.079905h178.431554a38.015905 38.015905 0 0 0 0-76.09581H230.656703z m498.430754-405.950985l-0.064-6.335985h-0.575998a37.375907 37.375907 0 0 0-37.183907-31.74392H230.656703a37.951905 37.951905 0 0 0-37.695905 38.079905c0 20.927948 16.895958 38.015905 37.695905 38.015905h460.670849c20.863948 0 37.759906-17.087957 37.759905-38.015905z m273.791316 437.310906a259.007352 259.007352 0 0 1-258.559354 258.623354 258.815353 258.815353 0 0 1-258.303354-258.623354 258.687353 258.687353 0 0 1 258.303354-258.239354 258.687353 258.687353 0 0 1 258.559354 258.239354z m-66.687833 0a191.743521 191.743521 0 0 0-383.487042 0 191.87152 191.87152 0 0 0 191.615521 191.743521 191.99952 191.99952 0 0 0 191.871521-191.743521z m-94.463764-84.607788a29.439926 29.439926 0 0 0-20.607949 8.511979l-92.671768 92.671768-50.047875-50.111875a29.887925 29.887925 0 0 0-21.887945-8.383979h-0.192a28.799928 28.799928 0 0 0-28.415929 28.03193 29.631926 29.631926 0 0 0 8.447979 22.335944l70.847823 70.783823h0.128a29.567926 29.567926 0 0 0 41.983895 0.128l113.471716-113.599716a29.887925 29.887925 0 0 0 0-41.855895 28.607928 28.607928 0 0 0-21.055947-8.511979z","p-id":"10274",fill:"#409EFF"}})]):i("svg",{staticClass:"icon",attrs:{t:"1570842842010",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3848",width:"18",height:"18"}},[i("path",{attrs:{d:"M742.72 425.344a240.576 240.576 0 0 0-208 121.28 245.504 245.504 0 0 0 0 242.432 240.32 240.32 0 0 0 208 121.344c132.416 0 240.064-108.8 240.064-242.496S875.2 425.344 742.72 425.344z m0 65.152c35.776 0 70.336 11.328 100.544 32.896L590.784 755.84a176.064 176.064 0 0 1-23.552-87.936 179.392 179.392 0 0 1 51.392-125.44 173.44 173.44 0 0 1 124.096-51.968z m0 354.688a172.864 172.864 0 0 1-100.544-32.832L894.72 579.904c15.424 26.944 23.488 57.216 23.488 87.872 0 46.72-18.688 92.416-51.392 125.44a173.184 173.184 0 0 1-124.096 51.968z","p-id":"3849",fill:"#aaaaaa"}}),t._v(" "),i("path",{attrs:{d:"M721.856 946.624l-512.704-0.256a94.4 94.4 0 0 1-93.824-94.848V171.328c0-52.288 42.048-94.848 93.824-94.848h543.68c51.84 0 93.952 42.56 93.952 94.848v209.024a30.72 30.72 0 0 0 0.128 4.224l0.064 0.576a37.184 37.184 0 0 0 55.296 27.584 37.12 37.12 0 0 0 17.92-27.584l0.64-243.84C920.832 63.424 858.112 0 780.928 0H181.184C104 0 41.216 63.424 41.216 141.312v741.44C41.216 960.704 104 1024 181.184 1024h540.672c21.888 0 39.68-17.344 39.68-38.656s-17.792-38.72-39.68-38.72z","p-id":"3850",fill:"#aaaaaa"}}),t._v(" "),i("path",{attrs:{d:"M487.36 541.312a37.952 37.952 0 0 0-37.696-38.08H250.688c-20.8 0-37.696 17.088-37.696 38.08s16.896 38.08 37.696 38.08h198.976a37.888 37.888 0 0 0 37.696-38.08z m106.432-144.064a37.952 37.952 0 0 0-37.696-37.952H250.688c-20.8 0-37.696 17.088-37.696 38.08s16.896 38.08 37.696 38.08h305.408a37.888 37.888 0 0 0 37.696-38.208zM749.12 246.144l-0.064-6.336h-0.512a37.504 37.504 0 0 0-37.248-31.744H250.688c-20.8 0-37.696 17.152-37.696 38.08s16.896 38.016 37.696 38.016H711.36c20.864 0 37.76-17.088 37.76-38.016zM250.688 652.096a37.888 37.888 0 0 0-37.696 38.016c0 20.992 16.896 38.08 37.696 38.08H429.12c20.8 0 37.76-17.088 37.76-38.08a37.952 37.952 0 0 0-37.76-38.016H250.688z","p-id":"3851",fill:"#aaaaaa"}})])]),t._v(" "),i("p",{staticClass:"action-icon fr"},["false"==e.item.inwhitelist?i("svg",{staticClass:"icon",attrs:{t:"1572233483828",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10629",width:"20",height:"20"},on:{click:function(a){t.handleWhitelist(e.item.package,"addWhitelist")}}},[i("path",{attrs:{d:"M831.55 128.531c38.35 0 63.911 25.568 63.911 63.91v639.104c0 38.355-25.561 63.916-63.91 63.916H192.44c-38.34 0-63.908-25.56-63.908-63.916V192.442c0-38.343 25.567-63.91 63.908-63.91h639.11m0-63.91H192.44c-70.3 0-127.816 57.518-127.816 127.82v639.103c0 70.308 57.515 127.833 127.816 127.833h639.11c70.294 0 127.822-57.525 127.822-127.833V192.442c0-70.302-57.527-127.82-127.823-127.82z m0 0","p-id":"10630",fill:"#aaaaaa"}})]):i("svg",{staticClass:"icon",attrs:{t:"1572233566165",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10804",width:"20",height:"20"},on:{click:function(a){t.handleWhitelist(e.item.package,"removeWhitelist")}}},[i("path",{attrs:{d:"M744.512 392.768L453.825 681.984l-41.92-41.664 290.689-289.28 41.92 41.728z m-423.168 73.984l132.481 131.84-41.92 41.728-132.481-131.904 41.92-41.664z m527.872 479.872H174.785c-62.016 0-112.384-48.704-112.384-108.671V186.05c0-59.968 50.432-108.671 112.384-108.671h674.431c62.016 0 112.384 48.704 112.384 108.671v651.903c0 59.968-50.368 108.671-112.384 108.671z m56.192-760.576c0-29.952-25.217-54.336-56.193-54.336H174.784c-30.976 0-56.193 24.384-56.193 54.336v651.903c0 29.952 25.217 54.336 56.193 54.336h674.431c30.976 0 56.193-24.384 56.193-54.336V186.048z","p-id":"10805",fill:"#409EFF"}})])])])}},{key:"card-body-img",fn:function(e){return i("img",{attrs:{src:t.getSrc(e.item.raid),onerror:t.defaultImg,alt:"no img"}})}}])})],1)],1)},staticRenderFns:[]};var S=a("C7Lr")(b,y,!1,function(t){a("AcRH")},"data-v-1cc61b3c",null).exports,_=a("a3Yh"),x=a.n(_),A=a("3cXf"),$=a.n(A),C=a("rVsN"),H=a.n(C),k=a("5Y2G"),O=function(t){var e={aeids:$()(t)},a={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};return new H.a(function(t,i){Object(k.c)("/api/execstatusmgr/batchdelete",e,a).then(function(e){t(e)}).catch(function(e){t(e.response)})})},D={data:function(){return{execStatusHistoryTableList:[],isshow:!1,limit:10,dataCount:0,currentPage:1,multipleSelection:[],isShowBtnGroup:!1,clearLoading:!1,batchDeleteExecStatusHistory:O,intervalTime:3e3,singleInstallType:h.I,batchWlType:h.m,listLoading:!1,isInterval:!1,statusArray:[]}},components:{btnGroup:g.a},props:{statusType:{default:h.m,type:String},selectedAgentId:{default:"",type:String},groupname:{default:"",type:String}},methods:{selectItem:function(t){this.multipleSelection=t},checkSelectable:function(t){return 0==!t.status},handleCurrentChange:function(t){this.currentPage=t||1,this.intervalGetExecStatusHistory()},deleteHistory:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){var i;a&&(e.listLoading=!0,(i=t,new H.a(function(t,e){Object(k.a)("/api/execstatusmgr/"+i).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){e.listLoading=!1,Object(r.a)(t,function(t){"CHANGED"===t.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.intervalGetExecStatusHistory()}):_g.handleError(t)})}))})},getExecStatusHistoryByGroupname:function(){var t,e,a,i,s,n=this;this.groupname||console.error("[getExecStatusHistoryByGroupname]groupname is empty"),!1===this.isInterval&&(this.listLoading=!0),this.statusArray.length>0?(t=this.groupname,e=this.statusType,a=this.currentPage,i=this.limit,s=this.statusArray,new H.a(function(n,o){var r={groupname:t,type:e,currentpage:a,limit:i,status:$()(s)};Object(k.b)("/api/execstatusmgr/bypageandstatusingroup",r).then(function(t){n(t)}).catch(function(t){n(t.response)})})).then(function(t){n.listLoading=!1,Object(r.a)(t,function(t){n.assignExecStatusData(t)})}):function(t,e,a,i){return new H.a(function(s,n){var o={groupname:t,type:e,currentpage:a,limit:i};Object(k.b)("/api/execstatusmgr/bypageingroup",o).then(function(t){s(t)}).catch(function(t){s(t.response)})})}(this.groupname,this.statusType,this.currentPage,this.limit).then(function(t){n.listLoading=!1,Object(r.a)(t,function(t){n.assignExecStatusData(t)})})},assignExecStatusData:function(t){if("[object Object]"===Object.prototype.toString.call(t)&&"[object Array]"===Object.prototype.toString.call(t.data)){this.dataCount=t.count,this.execStatusHistoryTableList=t.data,this.isshow=this.dataCount>this.limit,this.isShowBtnGroup=this.dataCount>0,this.$emit("getStatusCount");var e=!0;t.data.forEach(function(t){0==t.status&&(e=!1)}),e&&(this.$emit("isFinished"),window.clearInterval(_g.etimer),_g.etimer=null)}else window.clearInterval(_g.etimer),_g.etimer=null},intervalGetExecStatusHistory:function(){var t=this;this.getExecStatusHistoryByGroupname(),null===_g.etimer&&(_g.etimer=window.setInterval(function(){t.getExecStatusHistoryByGroupname(),t.isInterval=!0},this.intervalTime))},filterStatus:function(t){this.statusArray=t.status,this.currentPage=1,_g.isArray(this.statusArray)&&this.intervalGetExecStatusHistory()},resetAppSensor:function(t,e,a){var i=this;void 0!==o.b[t]?(this.listLoading=!0,Object(l.g)(e,o.b[t],a).then(function(t){i.listLoading=!1,Object(r.a)(t,function(t){"CHANGED"==t.status?(i.activeName="execStatusHistory",i.currentPage=1,i.intervalGetExecStatusHistory()):_g.handleError(t)})})):this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")})},reexec:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("appSecurity.reexec"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){if(a){var i={taskname:t.taskname,value:t.value};e.resetAppSensor("whitelist",t.deviceId,i)}})},isSuccess:function(t){t&&this.intervalGetExecStatusHistory()},clearAll:function(){var t=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.clearAll"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(e){var a,i;e&&(t.clearLoading=!0,(a=t.groupname,i=t.statusType,new H.a(function(t,e){var s={groupname:a,type:i};Object(k.c)("/api/execstatusmgr/deleteByGroup",s).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(e){t.clearLoading=!1,Object(r.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.intervalGetExecStatusHistory()}):_g.handleError(e)})}))})},initData:function(){this.execStatusHistoryTableList=[],this.isShowBtnGroup=!1,this.isshow=!1,this.currentPage=1},checkExecStatus:function(){var t,e;t=this.groupname,e=this.statusType,new H.a(function(a,i){var s={groupname:t,type:e};Object(k.b)("/api/execstatusmgr/bygroupname",s).then(function(t){a(t)}).catch(function(t){a(t.response)})})}},created:function(){this.$emit("getStatusCount")},beforeDestroy:function(){window.clearInterval(_g.etimer),_g.etimer=null},watch:{groupname:function(t){t&&(this.initData(),this.checkExecStatus(),this.intervalGetExecStatusHistory())}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"execStatusHistoryTable",staticStyle:{width:"100%"},attrs:{data:t.execStatusHistoryTableList,"tooltip-effect":"dark","default-sort":{prop:"ts",order:"descending"}},on:{"selection-change":t.selectItem,"filter-change":t.filterStatus}},[i("el-table-column",{attrs:{type:"selection","min-width":"50",selectable:t.checkSelectable}}),t._v(" "),i("el-table-column",{attrs:{prop:"devname",label:t.$t("appSecurity.deviceName"),"min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"taskname",label:t.$t("appSecurity.taskName"),"min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"value",label:t.$t("appSecurity.value"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("execStatusFunction")(e.row.value))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("appSecurity.time"),"min-width":"130",prop:"ts"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("time")(e.row.ts))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{"column-key":"status",prop:"status",label:t.$t("appSecurity.installStatus"),"min-width":"140",filters:[{text:t.$t("global.success"),value:2},{text:t.$t("global.failed"),value:1},{text:t.$t("global.running"),value:0}],"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?i("img",{staticStyle:{width:"50px",height:"10px"},attrs:{src:a("PLes"),alt:""}}):t._e(),t._v(" "),2==e.row.status?i("span",{staticClass:"badge bg-green"},[t._v(t._s(t.$t("global.success")))]):t._e(),t._v(" "),1==e.row.status?i("span",{staticClass:"badge bg-DimGray"},[t._v(t._s(t.$t("global.failed")))]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("appSecurity.errorStatus"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("appErrorStatus")(""+e.row.errorcode))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("appSecurity.action"),"min-width":"175",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("el-button-group",[i("el-button",{attrs:{size:"mini",type:"danger",disabled:0==e.row.status},on:{click:function(a){t.deleteHistory(e.row.aeid)}}},[t._v("\n                                "+t._s(t.$t("global.delete"))+"\n                        ")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",disabled:1!=e.row.status},on:{click:function(a){t.reexec(e.row)}}},[t._v("\n                                "+t._s(t.$t("appSecurity.reexec"))+"\n                        ")])],1)],1)]}}])})],1),t._v(" "),i("btn-group",{directives:[{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf",attrs:{selectedData:t.multipleSelection,isDelete:!0,isMove:!1,tid:"aeid",delApi:t.batchDeleteExecStatusHistory},on:{result:t.isSuccess}}),t._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.clearLoading,expression:"clearLoading"},{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf m-l-10",attrs:{size:"small",type:"primary"},on:{click:function(e){t.clearAll()}}},[t._v("\n    "+t._s(t.$t("appSecurity.clearAll"))+"\n    ")]),t._v(" "),i("div",{staticClass:"m-t-10 cf fr"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount,background:""},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var j=a("C7Lr")(D,T,!1,function(t){a("shM4")},"data-v-52870b8c",null).exports,M={name:"Appcontrol",data:function(){var t,e=this;return t={activeName:"whitelist",appTableData:[],defaultImg:'this.src="static/imgs/default_apk.png"',dialogTasknameVisible:!1,filename:"",pkgname:"",version:"",versioncode:"",wlForm:{taskname:""},rules:{taskname:{required:!0,validator:function(t,a,i){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,12}$/).test(a))return i(new Error(e.$t("global.verifyShortError")));i()},trigger:"blur"}},cid:""},x()(t,"dialogTasknameVisible",!1),x()(t,"multipleSelection",[]),x()(t,"batchWlType",h.m),x()(t,"whitelist",!1),x()(t,"setWlVal",""),x()(t,"whitelistLoading",!1),x()(t,"isShowOverview",!1),x()(t,"local_taskname",""),x()(t,"success",0),x()(t,"installing",0),x()(t,"failed",0),x()(t,"isExecShowOverview",!1),x()(t,"local_exec_taskname",""),x()(t,"exec_success",0),x()(t,"exec_installing",0),x()(t,"exec_failed",0),t},props:{selectedAgentsData:{type:Array,default:[]},groupname:{type:String,default:""},isSingleMode:{type:Boolean,default:!0}},components:{appHistory:m,cardTemp:w.a,execHistory:j},methods:{getSensorStatus:function(){var t=this;if(this.isSingleMode)console.error("Cannot operate in a single mode");else if(0!=this.selectedAgentsData.length){var e=[];this.whitelistLoading=!0,Object(l.e)(this.selectedAgentsData[0].value,o.c.getThirdAppInfo).then(function(a){t.whitelistLoading=!1,Object(r.a)(a,function(a){if(a.content.value){var i=JSON.parse(a.content.value).data;"[object Array]"===Object.prototype.toString.call(i)&&i.length>0&&i.forEach(function(t){if(h.o.indexOf(t.packageName)<0&&"true"!=t.isKioskApp){var a={type:"uninstallApp",appname:t.appName,package:t.packageName,versioncode:t.versionCode,version:t.versionName,inwhitelist:t.inWhiteList,address:"",raid:""};e.push(a)}})}t.getRepoApps(e)})})}else console.error("No device is online")},removeObjInArray:function(t,e){"[object Array]"===Object.prototype.toString.call(t)?t.forEach(function(a,i){a.package===e&&t.splice(i,1)}):console.error("data is not array")},getRepoApps:function(t){var e=this;"[object Array]"==Object.prototype.toString.call(t)?(this.whitelistLoading=!0,Object(c.a)().then(function(a){e.whitelistLoading=!1,Object(r.a)(a,function(a){if("success"===a.status){if("[object Array]"!==Object.prototype.toString.call(a.data))return void console.error("data is not array");a.data.forEach(function(e){t.forEach(function(a,i){e.pkgname===a.package&&(t[i].address=e.address,t[i].raid=e.raid)})})}e.appTableData=t})})):console.error("getRepoApps　parameter is not array")},getSrc:function(t){return t?Object(p.d)()+"/getAppIcon/"+t:"static/imgs/default_apk.png"},batchExecWhitelist:function(){var t=this,e=this.cid;""!=e?0!==this.selectedAgentsData.length?this.$refs.wlForm.validate(function(a){if(a){_g.openGlobalLoading();var i="",s="";if("whitelist"==e){if(void 0===o.b[e])return void t.$swal("",t.$t("global.functionNotSupport"),"info",{button:t.$t("global.confirm")});s=o.b[e],i={groupname:t.groupname,taskname:t.wlForm.taskname,value:t.setWlVal}}else{if(void 0===o.c[e])return void t.$swal("",t.$t("global.functionNotSupport"),"info",{button:t.$t("global.confirm")});s=o.c[e],i={groupname:t.groupname,taskname:t.wlForm.taskname,filename:t.filename,pkgname:t.pkgname,version:t.version,versioncode:t.versioncode}}var n=t.wlForm.taskname;t.dialogTasknameVisible=!1,t.whitelistLoading=!0,Object(l.a)(s,i).then(function(a){t.whitelistLoading=!1,Object(r.a)(a,function(a){"CHANGED"==a.status?"whitelist"==e?(t.getSensorStatus(),t.getServerStatus(),Object(u.f)("local_exec_tname",n),t.activeName="execStatusHistory",t.$refs.execHistory.intervalGetExecStatusHistory()):(Object(u.f)("local_wl_tname",n),t.activeName="wlStatusHistory",t.$refs.wlHistory.intervalGetAppStatusHistory()):_g.handleError(a)})})}}):this.$swal("",this.$t("global.devicesOffline"),"info",{button:this.$t("global.confirm")}):console.error("cid is empty")},handleWhitelist:function(t,e){this.cid=e,void 0!==o.c[e]?0!==this.selectedAgentsData.length?(this.pkgname=t.package,this.filename=t.appname,this.version=t.version,this.versioncode=t.versioncode,this.wlForm.taskname="",this.dialogTasknameVisible=!0):this.$swal("",this.$t("global.devicesOffline"),"info",{button:this.$t("global.confirm")}):this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")})},initApkInfo:function(){this.cid="",this.filename="",this.pkgname="",this.version="",this.wlForm.taskname="",this.setWlVal=""},getBatchAppStatusCount:function(){var t=this,e=Object(u.c)("local_wl_tname");if(!e)return console.error("getBatchAppStatusCount:localStorage(local_wl_tname) is null"),void(this.isShowOverview=!1);Object(d.k)(e,h.m).then(function(a){Object(r.a)(a,function(a){a&&(t.local_taskname=e,t.installing=a.installing,t.failed=a.fail,t.success=a.success,t.total>0&&"wlStatusHistory"===t.activeName?t.isShowOverview=!0:t.isShowOverview=!1)})})},getBatchExecStatusCount:function(){var t,e,a,i=this,s=Object(u.c)("local_exec_tname");if(!s)return console.error("getBatchExecStatusCount:localStorage(local_exec_tname) is null"),void(this.isShowOverview=!1);(t=s,e=h.m,a={taskname:t,type:e},new H.a(function(t,e){Object(k.b)("/api/execstatusmgr/overview",a).then(function(e){t(e)}).catch(function(e){t(e.response)})})).then(function(t){Object(r.a)(t,function(t){t&&(i.local_exec_taskname=s,i.exec_installing=t.execing,i.exec_failed=t.fail,i.exec_success=t.success,i.exec_total>0&&"execStatusHistory"===i.activeName?i.isExecShowOverview=!0:i.isExecShowOverview=!1)})})},initData:function(){this.whitelist=!1,this.appTableData=[]},handleClick:function(t){"wlStatusHistory"===t.name?this.getBatchAppStatusCount():this.isShowOverview=!1,"execStatusHistory"===t.name?this.getBatchExecStatusCount():this.isExecShowOverview=!1},getServerStatus:function(){var t=this;if(this.isSingleMode)console.error("Cannot operate in a single mode");else if(0!=this.selectedAgentsData.length){Object(l.e)(this.selectedAgentsData[0].value,o.b.whitelist).then(function(e){Object(r.a)(e,function(e){if("CONTENT"===e.status){var a=e.content.value;t.whitelist="boolean"==typeof a?a:"true"===a||"false"===a?"true"===a:a}})})}else console.error("No device is online")},statusChange:function(t,e){var a=this;this.cid=e,this.setWlVal=t;var i=e;return void 0===o.b[i]?(this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")}).then(function(){a[i]=a.$options.data()[i]}),!1):0==this.selectedAgentsData.length?(this.$swal("",this.$t("global.devicesOffline"),"info",{button:this.$t("global.confirm")}).then(function(){a[i]=a.$options.data()[i]}),!1):(this.wlForm.taskname="",void(this.dialogTasknameVisible=!0))},isFinished:function(){this.getSensorStatus()},isExecFinished:function(){this.getServerStatus()}},watch:{isSingleMode:function(t){t||this.initData()},groupname:function(t){!this.isSingleMode&&t&&(this.initData(),this.getSensorStatus(),this.getServerStatus())}},computed:{cardAppData:function(){return this.appTableData},appTypeShow:function(){return this.cardAppData.length>0},subIntro:function(){return["appname","version"]},appTypeArray:function(){return["uninstallApp"]},total:function(){return this.success+this.installing+this.failed},exec_total:function(){return this.exec_success+this.exec_installing+this.exec_failed}}},N={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSingleMode,expression:"!isSingleMode"}],staticClass:"execStatusContent"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.whitelistLoading,expression:"whitelistLoading"}],attrs:{name:"whitelist"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-sliders m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("appSecurity.whitelistManagement"))+"\n            ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.whitelist,expression:"whitelist"}],staticClass:"m-b-20 m-r-15 cf"},[i("el-button",{staticClass:"fr",attrs:{size:"small",type:"warning"},on:{click:function(e){t.statusChange(!1,"whitelist")}}},[i("i",{staticClass:"fa fa-stop m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                        "+t._s(t.$t("appSecurity.disable"))+"\n                ")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.whitelist&&t.appTypeShow,expression:"!whitelist && appTypeShow"}],staticClass:"text-center m-t-80"},[i("p",{staticClass:"m-b-10"},[i("svg",{staticClass:"icon",attrs:{t:"1570849917725",viewBox:"0 0 1170 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3963",width:"165",height:"165"}},[i("path",{attrs:{d:"M1024 73.386667a68.266667 68.266667 0 0 1 73.045333 73.045333v512A68.266667 68.266667 0 0 1 1024 731.477333H146.432a68.266667 68.266667 0 0 1-73.045333-73.045333v-512a68.266667 68.266667 0 0 1 73.045333-73.045333H1024M1024 0H146.432A146.773333 146.773333 0 0 0 0 146.432v512a146.773333 146.773333 0 0 0 146.432 146.432H1024a146.773333 146.773333 0 0 0 146.432-146.432v-512A146.773333 146.773333 0 0 0 1024 0zM731.477333 950.954667v-73.045334h-292.522666v73.045334H219.477333V1024h731.477334v-73.045333h-219.477334z",fill:"#dddddd","p-id":"3964"}}),t._v(" "),i("path",{attrs:{d:"M395.605333 206.848a27.989333 27.989333 0 0 1 8.192 20.48 29.013333 29.013333 0 0 1-8.192 20.821333 30.72 30.72 0 0 1-20.138666 7.850667 27.989333 27.989333 0 0 1-20.48-8.192 25.6 25.6 0 0 1-8.874667-20.48 25.6 25.6 0 0 1 8.874667-20.48 27.648 27.648 0 0 1 20.48-7.850667 30.037333 30.037333 0 0 1 20.138666 7.850667zM808.277333 244.736H451.925333a17.066667 17.066667 0 0 1 0-34.133333h356.352a17.066667 17.066667 0 0 1 0 34.133333zM395.605333 326.314667a27.989333 27.989333 0 0 1 8.192 20.48 29.013333 29.013333 0 0 1-8.192 20.821333 30.72 30.72 0 0 1-20.138666 7.850667 27.989333 27.989333 0 0 1-20.48-8.192 28.330667 28.330667 0 0 1 0-40.96 27.648 27.648 0 0 1 20.48-7.850667 30.037333 30.037333 0 0 1 20.138666 7.850667zM808.277333 363.861333H451.925333a17.066667 17.066667 0 0 1 0-34.133333h356.352a17.066667 17.066667 0 1 1 0 34.133333zM395.605333 445.781333a27.989333 27.989333 0 0 1 8.192 20.48 29.013333 29.013333 0 0 1-8.192 20.821334 30.72 30.72 0 0 1-21.162666 7.850666 27.989333 27.989333 0 0 1-20.48-8.192 28.330667 28.330667 0 0 1 0-40.96 27.648 27.648 0 0 1 20.48-7.850666 30.037333 30.037333 0 0 1 21.162666 7.850666zM808.277333 483.328H451.925333a17.066667 17.066667 0 0 1 0-34.133333h356.352a17.066667 17.066667 0 0 1 0 34.133333zM395.605333 565.248a27.989333 27.989333 0 0 1 8.192 20.48 29.013333 29.013333 0 0 1-8.192 20.821333 30.72 30.72 0 0 1-20.138666 7.850667 27.989333 27.989333 0 0 1-20.48-8.192 28.330667 28.330667 0 0 1 0-40.96 27.648 27.648 0 0 1 20.48-7.850667 30.037333 30.037333 0 0 1 20.138666 7.850667zM638.293333 602.794667h-186.368a17.066667 17.066667 0 0 1 0-34.133334h186.368a17.066667 17.066667 0 0 1 0 34.133334zM764.928 506.538667l16.384 33.109333 36.522667 5.461333-26.624 25.941334 6.485333 36.522666-32.768-17.408-32.768 17.408 6.144-36.522666-26.624-25.941334 36.864-5.461333 16.384-33.109333z",fill:"#dddddd","p-id":"3965"}})])]),t._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){t.statusChange(!0,"whitelist")}}},[i("i",{staticClass:"fa fa-play m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                        "+t._s(t.$t("appSecurity.enable"))+"\n                ")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.appTypeShow,expression:"!appTypeShow"}],staticClass:"text-center noData"},[i("p",[i("img",{attrs:{src:a("OFBL"),alt:""}}),t._v("\n                    "+t._s(t.$t("appSecurity.noData"))+"\n                ")])]),t._v(" "),i("card-temp",{directives:[{name:"show",rawName:"v-show",value:t.whitelist,expression:"whitelist"}],attrs:{data:t.cardAppData,subIntro:t.subIntro,isAllShow:!1,typeArray:t.appTypeArray,typeKey:"type",headerBg:"#efefef"},scopedSlots:t._u([{key:"card-header",fn:function(e){return i("div",{staticClass:"card-header cf"},[i("p",{staticClass:"inwhite-icon fl"},["true"==e.item.inwhitelist?i("svg",{staticClass:"icon",attrs:{t:"1570842481397",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10273",width:"18",height:"18"}},[i("path",{attrs:{d:"M741.439426 985.341537a39.231902 39.231902 0 0 1-39.615901 38.655903H161.152877A140.799648 140.799648 0 0 1 21.121227 882.749793V141.311647C21.121227 63.423841 83.96907 0 161.152877 0h599.742501c77.183807 0 139.96765 63.423841 139.96765 141.311647l-0.703998 243.83939a36.991908 36.991908 0 0 1-17.919956 27.583931 37.119907 37.119907 0 0 1-55.231862-27.583931l-0.127999-0.575998c-0.128-1.343997-0.128-2.815993-0.128-4.22399V171.327572c0-52.287869-42.047895-94.847763-93.887765-94.847763H189.056807c-51.775871 0-93.823765 42.559894-93.823765 94.847763v680.190299a94.335764 94.335764 0 0 0 93.823765 94.847763l512.766718 0.255999c21.887945 0 39.615901 17.407956 39.615901 38.719904zM573.695846 397.375007v-0.128a37.887905 37.887905 0 0 0-37.631906-37.951905H230.656703c-20.799948 0-37.695906 17.087957-37.695905 38.079905s16.895958 38.079905 37.695905 38.079904h305.407237a37.887905 37.887905 0 0 0 37.631906-38.079904zM467.328112 541.310647a37.951905 37.951905 0 0 0-37.759906-38.079905H230.656703c-20.799948 0-37.695906 17.087957-37.695905 38.079905s16.895958 38.079905 37.695905 38.079905h198.911503a37.951905 37.951905 0 0 0 37.759906-38.079905z m-236.671409 110.783723a37.887905 37.887905 0 0 0-37.695905 38.015905c0 20.991948 16.895958 38.079905 37.695905 38.079905h178.431554a38.015905 38.015905 0 0 0 0-76.09581H230.656703z m498.430754-405.950985l-0.064-6.335985h-0.575998a37.375907 37.375907 0 0 0-37.183907-31.74392H230.656703a37.951905 37.951905 0 0 0-37.695905 38.079905c0 20.927948 16.895958 38.015905 37.695905 38.015905h460.670849c20.863948 0 37.759906-17.087957 37.759905-38.015905z m273.791316 437.310906a259.007352 259.007352 0 0 1-258.559354 258.623354 258.815353 258.815353 0 0 1-258.303354-258.623354 258.687353 258.687353 0 0 1 258.303354-258.239354 258.687353 258.687353 0 0 1 258.559354 258.239354z m-66.687833 0a191.743521 191.743521 0 0 0-383.487042 0 191.87152 191.87152 0 0 0 191.615521 191.743521 191.99952 191.99952 0 0 0 191.871521-191.743521z m-94.463764-84.607788a29.439926 29.439926 0 0 0-20.607949 8.511979l-92.671768 92.671768-50.047875-50.111875a29.887925 29.887925 0 0 0-21.887945-8.383979h-0.192a28.799928 28.799928 0 0 0-28.415929 28.03193 29.631926 29.631926 0 0 0 8.447979 22.335944l70.847823 70.783823h0.128a29.567926 29.567926 0 0 0 41.983895 0.128l113.471716-113.599716a29.887925 29.887925 0 0 0 0-41.855895 28.607928 28.607928 0 0 0-21.055947-8.511979z","p-id":"10274",fill:"#409EFF"}})]):i("svg",{staticClass:"icon",attrs:{t:"1570842842010",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3848",width:"18",height:"18"}},[i("path",{attrs:{d:"M742.72 425.344a240.576 240.576 0 0 0-208 121.28 245.504 245.504 0 0 0 0 242.432 240.32 240.32 0 0 0 208 121.344c132.416 0 240.064-108.8 240.064-242.496S875.2 425.344 742.72 425.344z m0 65.152c35.776 0 70.336 11.328 100.544 32.896L590.784 755.84a176.064 176.064 0 0 1-23.552-87.936 179.392 179.392 0 0 1 51.392-125.44 173.44 173.44 0 0 1 124.096-51.968z m0 354.688a172.864 172.864 0 0 1-100.544-32.832L894.72 579.904c15.424 26.944 23.488 57.216 23.488 87.872 0 46.72-18.688 92.416-51.392 125.44a173.184 173.184 0 0 1-124.096 51.968z","p-id":"3849",fill:"#aaaaaa"}}),t._v(" "),i("path",{attrs:{d:"M721.856 946.624l-512.704-0.256a94.4 94.4 0 0 1-93.824-94.848V171.328c0-52.288 42.048-94.848 93.824-94.848h543.68c51.84 0 93.952 42.56 93.952 94.848v209.024a30.72 30.72 0 0 0 0.128 4.224l0.064 0.576a37.184 37.184 0 0 0 55.296 27.584 37.12 37.12 0 0 0 17.92-27.584l0.64-243.84C920.832 63.424 858.112 0 780.928 0H181.184C104 0 41.216 63.424 41.216 141.312v741.44C41.216 960.704 104 1024 181.184 1024h540.672c21.888 0 39.68-17.344 39.68-38.656s-17.792-38.72-39.68-38.72z","p-id":"3850",fill:"#aaaaaa"}}),t._v(" "),i("path",{attrs:{d:"M487.36 541.312a37.952 37.952 0 0 0-37.696-38.08H250.688c-20.8 0-37.696 17.088-37.696 38.08s16.896 38.08 37.696 38.08h198.976a37.888 37.888 0 0 0 37.696-38.08z m106.432-144.064a37.952 37.952 0 0 0-37.696-37.952H250.688c-20.8 0-37.696 17.088-37.696 38.08s16.896 38.08 37.696 38.08h305.408a37.888 37.888 0 0 0 37.696-38.208zM749.12 246.144l-0.064-6.336h-0.512a37.504 37.504 0 0 0-37.248-31.744H250.688c-20.8 0-37.696 17.152-37.696 38.08s16.896 38.016 37.696 38.016H711.36c20.864 0 37.76-17.088 37.76-38.016zM250.688 652.096a37.888 37.888 0 0 0-37.696 38.016c0 20.992 16.896 38.08 37.696 38.08H429.12c20.8 0 37.76-17.088 37.76-38.08a37.952 37.952 0 0 0-37.76-38.016H250.688z","p-id":"3851",fill:"#aaaaaa"}})])]),t._v(" "),i("p",{staticClass:"action-icon fr"},["false"==e.item.inwhitelist?i("svg",{staticClass:"icon",attrs:{t:"1572233483828",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10629",width:"20",height:"20"},on:{click:function(a){t.handleWhitelist(e.item,"addWhitelist")}}},[i("path",{attrs:{d:"M831.55 128.531c38.35 0 63.911 25.568 63.911 63.91v639.104c0 38.355-25.561 63.916-63.91 63.916H192.44c-38.34 0-63.908-25.56-63.908-63.916V192.442c0-38.343 25.567-63.91 63.908-63.91h639.11m0-63.91H192.44c-70.3 0-127.816 57.518-127.816 127.82v639.103c0 70.308 57.515 127.833 127.816 127.833h639.11c70.294 0 127.822-57.525 127.822-127.833V192.442c0-70.302-57.527-127.82-127.823-127.82z m0 0","p-id":"10630",fill:"#aaaaaa"}})]):i("svg",{staticClass:"icon",attrs:{t:"1572233566165",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10804",width:"20",height:"20"},on:{click:function(a){t.handleWhitelist(e.item,"removeWhitelist")}}},[i("path",{attrs:{d:"M744.512 392.768L453.825 681.984l-41.92-41.664 290.689-289.28 41.92 41.728z m-423.168 73.984l132.481 131.84-41.92 41.728-132.481-131.904 41.92-41.664z m527.872 479.872H174.785c-62.016 0-112.384-48.704-112.384-108.671V186.05c0-59.968 50.432-108.671 112.384-108.671h674.431c62.016 0 112.384 48.704 112.384 108.671v651.903c0 59.968-50.368 108.671-112.384 108.671z m56.192-760.576c0-29.952-25.217-54.336-56.193-54.336H174.784c-30.976 0-56.193 24.384-56.193 54.336v651.903c0 29.952 25.217 54.336 56.193 54.336h674.431c30.976 0 56.193-24.384 56.193-54.336V186.048z","p-id":"10805",fill:"#409EFF"}})])])])}},{key:"card-body-img",fn:function(e){return i("img",{attrs:{src:t.getSrc(e.item.raid),onerror:t.defaultImg,alt:"no img"}})}}])})],1),t._v(" "),i("el-tab-pane",{attrs:{name:"wlStatusHistory"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-history m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("appSecurity.operatAppHistory"))+"\n            ")]),t._v(" "),i("app-history",{ref:"wlHistory",attrs:{statusType:t.batchWlType,groupname:t.groupname},on:{getStatusCount:t.getBatchAppStatusCount,isFinished:t.isFinished}})],1),t._v(" "),i("el-tab-pane",{attrs:{name:"execStatusHistory"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-history m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("appSecurity.execHistory"))+"\n            ")]),t._v(" "),i("exec-history",{ref:"execHistory",attrs:{statusType:t.batchWlType,groupname:t.groupname},on:{getStatusCount:t.getBatchExecStatusCount,isFinished:t.isExecFinished}})],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogTasknameVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTasknameVisible=e},close:function(e){t.initApkInfo()}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"fa fa-hand-pointer-o m-r-10"}),t._v("\n            "+t._s(t.$t("appSecurity.batchExec"))+"\n        ")]),t._v(" "),i("el-form",{ref:"wlForm",attrs:{model:t.wlForm,rules:t.rules}},[i("el-form-item",{attrs:{label:t.$t("label.taskName"),"label-width":"230px",prop:"taskname"}},[i("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:t.$t("appSecurity.execTaskName")},model:{value:t.wlForm.taskname,callback:function(e){t.$set(t.wlForm,"taskname","string"==typeof e?e.trim():e)},expression:"wlForm.taskname"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogTasknameVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.batchExecWhitelist()}}},[t._v(t._s(t.$t("global.confirm")))])],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowOverview,expression:"isShowOverview"}],staticClass:"appStatusCount"},[i("span",[t._v(t._s(t.$t("label.taskName"))+" "+t._s(t.local_taskname))]),t._v(" "),i("span",[t._v(t._s(t.$t("appSecurity.total"))+" "+t._s(t.total))]),t._v(" "),i("span",[t._v(t._s(t.$t("appSecurity.deploying"))+" "+t._s(t.installing))]),t._v(" "),i("span",[t._v(t._s(t.$t("appSecurity.success"))+" "+t._s(t.success))]),t._v(" "),i("span",[t._v(t._s(t.$t("appSecurity.failed"))+" "+t._s(t.failed))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isExecShowOverview,expression:"isExecShowOverview"}],staticClass:"appStatusCount"},[i("span",[t._v(t._s(t.$t("label.taskName"))+" "+t._s(t.local_exec_taskname))]),t._v(" "),i("span",[t._v(t._s(t.$t("appSecurity.total"))+" "+t._s(t.exec_total))]),t._v(" "),i("span",[t._v(t._s(t.$t("appSecurity.deploying"))+" "+t._s(t.exec_installing))]),t._v(" "),i("span",[t._v(t._s(t.$t("appSecurity.success"))+" "+t._s(t.exec_success))]),t._v(" "),i("span",[t._v(t._s(t.$t("appSecurity.failed"))+" "+t._s(t.exec_failed))])])],1)},staticRenderFns:[]};var z=a("C7Lr")(M,N,!1,function(t){a("d3Ix")},"data-v-13124bd2",null).exports,E={name:"appSecurity",data:function(){return{selectedAgentId:"",selectedAgentsData:[],isSingleMode:!0,groupname:"",isDisabledOffDev:!0,isOffline:!1,appSecurityIconColor:"#303133",groupType:h.u.android,groupTypeArray:[h.u.android]}},components:{selectDevice:i.a,selectGroup:n.a,modeSwitch:s.a,singleControl:S,batchControl:z},methods:{getDeviceOption:function(t){this.selectedAgentId=t},getGroupOption:function(t){this.selectedAgentsData=t},initData:function(){this.selectedAgentId="",this.groupname="",this.selectedAgentsData=[]},changeMode:function(t){this.initData(),this.isSingleMode=!t},getGroupName:function(t){this.groupname=t},isDisabled:function(t){this.isDisabledOffDev=t},isOfflineDev:function(t){this.isOffline=t}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-box"},[a("div",{staticClass:"title-box"},[a("p",{staticClass:"header-line"},[a("svg",{staticClass:"icon m-r-10",attrs:{t:"1569376934286",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2530",width:"18",height:"18"}},[a("path",{attrs:{d:"M718.188013 520.572236H305.821197v-51.54598c0-18.978237 15.385409-34.363645 34.363646-34.363645h343.639524c18.978237 0 34.363645 15.385409 34.363646 34.363645v51.54598z",fill:t.appSecurityIconColor,"p-id":"2531"}}),t._v(" "),a("path",{attrs:{d:"M512 958.708971c-13.909801 0-27.836999-4.202719-39.71656-12.618388L296.452829 821.496913C191.213973 738.90894 133.995807 622.150726 133.995807 491.733421V255.221776a34.370809 34.370809 0 0 1 19.648502-31.05018L473.626018 72.453149a31.991622 31.991622 0 0 1 3.691065-1.493004c22.299889-7.550976 46.914496-7.567349 69.248154 0 1.258667 0.419556 2.499937 0.923022 3.691065 1.493004l320.098366 151.718447a34.362622 34.362622 0 0 1 19.648502 31.05018v236.512668c0 130.433678-57.217143 247.183705-161.098072 328.756559L551.732933 946.082396c-11.879562 8.41567-25.806759 12.626575-39.732933 12.626575zM202.724121 276.958846v214.774575c0 108.872616 47.88766 206.427466 134.821615 274.701432l174.454264 123.571387 175.813215-124.586507c85.591377-67.251683 133.462664-164.80551 133.462664-273.686312V276.958846L522.906397 135.543046c-7.131421-2.064009-14.832823-2.064009-21.930475 0L202.724121 276.958846z",fill:t.appSecurityIconColor,"p-id":"2532"}}),t._v(" "),a("path",{attrs:{d:"M512 676.532287c-18.977213 0-34.363645-15.386432-34.363645-34.363645V313.068252c0-18.977213 15.386432-34.363645 34.363645-34.363646s34.363645 15.386432 34.363645 34.363646V642.168642c0 18.977213-15.386432 34.363645-34.363645 34.363645z",fill:t.appSecurityIconColor,"p-id":"2533"}})]),t._v("\n            "+t._s(t.$t("appSecurity.appSecurity"))+"\n        \n        ")])]),t._v(" "),a("div",{staticClass:"select-box"},[a("mode-switch",{on:{"mode-status":t.changeMode}}),t._v(" "),a("span",{staticClass:"vertical"}),t._v(" "),a("select-group",{attrs:{isSingleMode:t.isSingleMode,groupType:t.groupTypeArray},on:{"select-getDeviceOptions":t.getGroupOption,"select-getGroupName":t.getGroupName}}),t._v(" "),a("select-device",{attrs:{isSingleMode:t.isSingleMode,isDisabledOffDev:t.isDisabledOffDev,groupType:t.groupType},on:{"select-device":t.getDeviceOption,isOfflineDev:t.isOfflineDev}})],1),t._v(" "),a("div",{staticClass:"table-box"},[a("single-control",{attrs:{selectedAgentId:t.selectedAgentId,isSingleMode:t.isSingleMode,isOffline:t.isOffline},on:{isDisabled:t.isDisabled}}),t._v(" "),a("batch-control",{attrs:{selectedAgentsData:t.selectedAgentsData,isSingleMode:t.isSingleMode,groupname:t.groupname}})],1)])},staticRenderFns:[]};var I=a("C7Lr")(E,L,!1,function(t){a("ITB2"),a("Snny")},"data-v-7d1fafd9",null);e.default=I.exports},Snny:function(t,e){},d3Ix:function(t,e){},gb6P:function(t,e){},shM4:function(t,e){}});
//# sourceMappingURL=8.5ab56aaae98b61eefbac.js.map