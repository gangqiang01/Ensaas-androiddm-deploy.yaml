webpackJsonp([29],{DVk8:function(r,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=o("4YfN"),a=o.n(t),d=o("aA9S"),i=o.n(d),s=o("cmsW"),l=o("jnx8"),n=o("22O3"),c=o("yeZF"),u=o("/eZD"),m=o("9rMa"),p={name:"workorderList",data:function(){var r=this,e=function(e,o,t){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,12}$/).test(o))return t(new Error(r.$t("global.verifyShortError")));t()},o=function(e,o,t){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,48}$/).test(o))return t(new Error(r.$t("global.verifyDescriptionError")));t()};return{formLabelWidth:"200px",dialogEditWorkorderVisible:!1,dialogAddWorkorderVisible:!1,selectedWorkorder:"",workorderData:[],workorderForm:{name:"",description:""},addWorkorderForm:{addName:"",addDescription:"",wdType:""},rules:{name:{required:!0,validator:e,trigger:"blur"},description:{required:!0,validator:o,trigger:"blur"},addName:{required:!0,validator:e,trigger:"blur"},addDescription:{required:!0,validator:o,trigger:"blur"}},typeArray:[{label:"Android",value:u.u.android},{label:"Linux",value:u.u.linux},{label:"Windows",value:u.u.windows}],wdtypes:u.u}},components:{cardTemp:c.a},methods:{getAllWorkorders:function(){var r=this;_g.openGlobalLoading(),Object(s.l)().then(function(e){Object(l.a)(e,function(e){"[object Array]"===Object.prototype.toString.call(e)&&(r.workorderData=e)})})},editWorkorder:function(){var r=this;this.$refs.workorderForm.validate(function(e){e&&(Object(s.j)(r.selectedWorkorder,r.workorderForm.name,r.workorderForm.description).then(function(e){Object(l.a)(e,function(e){"CHANGED"===e.status?r.$swal("",r.$t("global.success"),"success",{button:r.$t("global.confirm")}).then(function(){r.getAllWorkorders()}):_g.handleError(e)})}),r.dialogEditWorkorderVisible=!1)})},editClick:function(r){var e=this;i()(this.$data.workorderForm,this.$options.data().workorderForm),Object(s.m)(r).then(function(r){Object(l.a)(r,function(r){_g.isObject(r)&&(e.workorderForm=r)})}),this.selectedWorkorder=r,this.dialogEditWorkorderVisible=!0},addClick:function(){i()(this.$data.addWorkorderForm,this.$options.data().addWorkorderForm),this.getGroupType(),this.dialogAddWorkorderVisible=!0},deleteWorkorder:function(r){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(o){o&&Object(s.e)(r).then(function(r){Object(l.a)(r,function(r){"CHANGED"===r.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.getAllWorkorders()}):_g.handleError(r)})})})},addWorkorder:function(){var r=this;if(Object(n.b)("username")){var e=Object(n.d)("username");this.$refs.addWorkorderForm.validate(function(o){o&&Object(s.a)(r.addWorkorderForm.addName,e,r.addWorkorderForm.addDescription,r.addWorkorderForm.wdType).then(function(e){Object(l.a)(e,function(e){"CHANGED"===e.status?r.$router.push({path:"/main/workorder/details",query:{wdname:r.addWorkorderForm.addName,type:r.addWorkorderForm.wdType}}):_g.handleError(e)})})})}else this.$swal("",this.$t("global.loginExpired"),"info",{button:this.$t("global.confirm")}).then(function(){r.$router.replace("/")})},handleCommand:function(r){var e=this;switch(r.id){case"delete":this.deleteWorkorder(r.name);break;case"edit":var o=r.name;i()(this.$data.workorderForm,this.$options.data().workorderForm),Object(s.m)(o).then(function(r){Object(l.a)(r,function(r){_g.isObject(r)&&(e.workorderForm=r)})}),this.selectedWorkorder=o,this.dialogEditWorkorderVisible=!0;break;case"deploy":this.$router.push({path:"/main/workorder/summary",query:{wdname:r.name,type:r.wdtype}})}},deploy:function(r,e){this.$router.push({path:"/main/workorder/summary",query:{wdname:r,type:e}})},getGroupType:function(){var r=Object(n.d)("apphub_os");if(r){var e=[];JSON.parse(r).forEach(function(r){r==u.u.android?e.push({label:"Android",value:r}):r==u.u.linux?e.push({label:"Linux",value:r}):r==u.u.windows&&e.push({label:"Windows",value:r})}),1==e.length&&(this.addWorkorderForm.wdType=e[0].value),this.typeArray=e}}},watch:{osStatusCount:function(){this.getGroupType()}},computed:a()({},Object(m.b)({osStatusCount:"osStatusCount"})),created:function(){this.getAllWorkorders()}},f={render:function(){var r=this,e=r.$createElement,o=r._self._c||e;return o("div",[o("p",{staticClass:"header-line"},[o("i",{staticClass:"fa fa-sliders m-r-10",attrs:{"aria-hidden":"true"}}),r._v(r._s(r.$t("workorder.workorderManager"))+"\n    ")]),r._v(" "),o("card-temp",{attrs:{data:r.workorderData,isCommon:!1,isShowAdd:!0,width:"190px",height:"210px",headerBg:"#eeffee",subIntro:["name"],src:"static/imgs/workorder.png"},on:{addCard:r.addClick},scopedSlots:r._u([{key:"card-header",fn:function(e){return o("div",{staticClass:"card-header cf"},[e.item.wdtype==r.wdtypes.android?o("i",{staticClass:"fa fa-android os-icon"}):r._e(),r._v(" "),e.item.wdtype==r.wdtypes.linux?o("i",{staticClass:"fa fa-linux os-icon"}):r._e(),r._v(" "),e.item.wdtype==r.wdtypes.windows?o("i",{staticClass:"fa fa-windows os-icon"}):r._e(),r._v(" "),o("el-dropdown",{staticClass:"fr pointer",attrs:{trigger:"click",size:"small"},on:{command:r.handleCommand}},[o("span",{staticClass:"el-dropdown-link"},[o("i",{staticClass:"fa fa-ellipsis-v dropdown",attrs:{"aria-hidden":"true"}})]),r._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:{name:e.item.name,id:"edit"}}},[o("i",{staticClass:"fa fa-pencil-square-o m-r-5",attrs:{"aria-hidden":"true"}}),r._v("\n                        "+r._s(r.$t("global.rename"))+"\n                    ")]),r._v(" "),o("el-dropdown-item",{attrs:{command:{name:e.item.wid,id:"delete"}}},[o("i",{staticClass:"fa fa-trash-o m-r-7",attrs:{"aria-hidden":"true"}}),r._v("\n                        "+r._s(r.$t("global.delete"))+"\n                    ")]),r._v(" "),o("el-dropdown-item",{attrs:{command:{name:e.item.name,id:"deploy"}}},[o("i",{staticClass:"fa fa-paper-plane-o m-r-5",attrs:{"aria-hidden":"true"}}),r._v("\n                        "+r._s(r.$t("global.deploy"))+"\n                    ")])],1)],1)],1)}},{key:"card-body-img",fn:function(e){return o("svg",{staticClass:"icon pointer",attrs:{t:"1571377803155",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3196",width:"68",height:"68"},on:{click:function(o){r.deploy(e.item.name,e.item.wdtype)}}},[o("path",{attrs:{d:"M413.013333 162.133333h198.997334a45.056 45.056 0 0 0 42.325333-47.104A45.397333 45.397333 0 0 0 610.645333 68.266667H413.013333a45.397333 45.397333 0 0 0-43.690666 46.762666 45.397333 45.397333 0 0 0 43.690666 47.104z","p-id":"3197",fill:"#3c8dbc"}}),r._v(" "),o("path",{attrs:{d:"M803.498667 110.250667H750.933333s-37.546667 10.24-37.546666 15.701333c0 39.594667-27.648 78.506667-60.757334 78.506667h-286.037333a74.069333 74.069333 0 0 1-62.805333-78.506667c0-5.12-34.133333-15.701333-34.133334-15.701333H211.626667c-75.093333 0-94.208 44.373333-94.208 107.861333v630.784c0 68.266667 26.624 106.837333 99.669333 106.837333h580.266667c73.045333 0 108.544-30.037333 108.544-106.837333V218.112c0.682667-63.488-32.768-107.861333-102.4-107.861333z m-311.637334 737.28H244.736c-15.018667 0-24.234667-16.384-24.234667-31.744a30.378667 30.378667 0 0 1 27.306667-30.72h245.76a31.402667 31.402667 0 0 1 28.672 30.72 34.133333 34.133333 0 0 1-30.378667 31.744z m0-226.304H244.736c-15.018667 0-24.234667-16.384-24.234667-31.744a30.378667 30.378667 0 0 1 27.306667-30.72h245.76a31.402667 31.402667 0 0 1 28.672 30.72 34.133333 34.133333 0 0 1-30.378667 31.744z m245.418667 48.128v167.594666a16.725333 16.725333 0 0 1-17.066667 17.066667h-57.685333a16.725333 16.725333 0 0 1-17.066667-17.066667v-167.594666a111.616 111.616 0 0 1 8.533334-207.530667v106.154667h74.410666v-106.154667a111.616 111.616 0 0 1 8.533334 207.530667z m35.84-273.066667H244.736c-15.018667 0-24.234667-16.384-24.234667-31.744a30.378667 30.378667 0 0 1 27.306667-30.72h527.36a31.402667 31.402667 0 0 1 28.672 30.72 34.133333 34.133333 0 0 1-30.72 30.037333z","p-id":"3198",fill:"#3c8dbc"}})])}}])}),r._v(" "),o("el-dialog",{attrs:{visible:r.dialogEditWorkorderVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){r.dialogEditWorkorderVisible=e}}},[o("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[o("i",{staticClass:"fa fa-pencil-square-o m-r-10",attrs:{"aria-hidden":"true"}}),r._v("\n            "+r._s(r.$t("workorder.editWorkorderName"))+"\n        ")]),r._v(" "),o("el-form",{ref:"workorderForm",attrs:{model:r.workorderForm,rules:r.rules}},[o("el-form-item",{attrs:{label:r.$t("label.workorderName"),"label-width":r.formLabelWidth,prop:"name"}},[o("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off"},model:{value:r.workorderForm.name,callback:function(e){r.$set(r.workorderForm,"name",e)},expression:"workorderForm.name"}})],1),r._v(" "),o("el-form-item",{attrs:{label:r.$t("label.workorderDescription"),"label-width":r.formLabelWidth,prop:"description"}},[o("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",type:"textarea",autosize:{minRows:1,maxRows:3}},model:{value:r.workorderForm.description,callback:function(e){r.$set(r.workorderForm,"description",e)},expression:"workorderForm.description"}})],1)],1),r._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){r.dialogEditWorkorderVisible=!1}}},[r._v(r._s(r.$t("global.cancel")))]),r._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){r.editWorkorder()}}},[r._v(r._s(r.$t("global.confirm")))])],1)],1),r._v(" "),o("el-dialog",{attrs:{visible:r.dialogAddWorkorderVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){r.dialogAddWorkorderVisible=e}}},[o("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[o("i",{staticClass:"fa fa-plus-square-o m-r-10",attrs:{"aria-hidden":"true"}}),r._v("\n            "+r._s(r.$t("workorder.addWorkorder"))+"\n        ")]),r._v(" "),o("el-form",{ref:"addWorkorderForm",attrs:{model:r.addWorkorderForm,rules:r.rules}},[o("el-form-item",{attrs:{label:r.$t("label.workorderName"),"label-width":r.formLabelWidth,prop:"addName"}},[o("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:r.$t("workorder.inputWorkorderNameHolder")},model:{value:r.addWorkorderForm.addName,callback:function(e){r.$set(r.addWorkorderForm,"addName",e)},expression:"addWorkorderForm.addName"}})],1),r._v(" "),o("el-form-item",{attrs:{label:r.$t("label.workorderDescription"),"label-width":r.formLabelWidth,prop:"addDescription"}},[o("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",type:"textarea",placeholder:r.$t("workorder.inputWorkorderDescriptionHolder"),autosize:{minRows:1,maxRows:3}},model:{value:r.addWorkorderForm.addDescription,callback:function(e){r.$set(r.addWorkorderForm,"addDescription",e)},expression:"addWorkorderForm.addDescription"}})],1),r._v(" "),o("el-form-item",{attrs:{label:r.$t("label.workorderType"),"label-width":r.formLabelWidth,prop:"addGroupType"}},[o("el-radio-group",{model:{value:r.addWorkorderForm.wdType,callback:function(e){r.$set(r.addWorkorderForm,"wdType",e)},expression:"addWorkorderForm.wdType"}},r._l(r.typeArray,function(e){return o("el-radio",{key:e.value,attrs:{label:e.value}},[r._v(r._s(e.label))])}))],1)],1),r._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){r.dialogAddWorkorderVisible=!1}}},[r._v(r._s(r.$t("global.cancel")))]),r._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){r.addWorkorder()}}},[r._v(r._s(r.$t("global.confirm")))])],1)],1)],1)},staticRenderFns:[]};var b=o("C7Lr")(p,f,!1,function(r){o("W7pF")},"data-v-7926917a",null);e.default=b.exports},W7pF:function(r,e){}});
//# sourceMappingURL=29.79e408c204a9c4110a19.js.map