webpackJsonp([9],{ALGA:function(t,e){},DAwQ:function(t,e,a){"use strict";a.d(e,"a",function(){return l}),a.d(e,"b",function(){return r});var i=a("rVsN"),s=a.n(i),n=a("5Y2G"),o=a("OT2R"),l=(a("6LEk"),function(){return new s.a(function(t,e){Object(o.c)().then(function(e){var a=e+"/repoDockerCompose";Object(n.h)(a,"").then(function(e){t(e)}).catch(function(e){t(e.response)})})})}),r=function(t){var e={address:t};return new s.a(function(t,a){Object(o.c)().then(function(a){var i=a+"/dockerComposeYmlContent";Object(n.h)(i,e).then(function(e){t(e)}).catch(function(e){t(e.response)})})})}},J0bX:function(t,e){t.exports="data:image/png;base64,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"},Tisq:function(t,e){},jBLt:function(t,e){},sGLT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("42+z"),s=a("FM1y"),n=a("HvBW"),o=a("3cXf"),l=a.n(o),r=a("jwu5"),c=a("jnx8"),d=a("YMj5"),u=a("DAwQ"),p=a("22O3"),h=(a("OT2R"),a("/eZD")),g=a("UuJD"),m={name:"dockerControlHistory",data:function(){return{pkgStatusHistoryTableList:[],isshow:!1,limit:10,dataCount:0,currentPage:1,multipleSelection:[],isShowBtnGroup:!1,clearLoading:!1,batchDeleteAppStatusHistory:g.a,intervalTime:7e3,isInterval:!1,listLoading:!1,singleDockerType:h.F,batchDockerType:h.h,statusArray:[]}},components:{btnGroup:a("C+p8").a},props:{statusType:{default:h.h,type:String},selectedAgentId:{default:"",type:String},groupname:{default:"",type:String}},methods:{selectItem:function(t){this.multipleSelection=t},checkSelectable:function(t){return 0==!t.status},handleCurrentChange:function(t){this.currentPage=t||1,this.intervalGetDockerStatusHistory()},deleteHistory:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){a&&(e.listLoading=!0,Object(g.d)(t).then(function(t){e.listLoading=!1,Object(c.a)(t,function(t){"CHANGED"===t.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){e.intervalGetDockerStatusHistory()}):_g.handleError(t)})}))})},checkAppStatusData:function(){this.statusType==h.h?Object(g.f)(this.groupname,this.statusType):Object(g.e)(this.selectedAgentId,this.statusType)},getAppStatusHistoryByGroupname:function(){var t=this;this.groupname||console.error("[getAppStatusHistoryByGroupname]groupname is empty"),!1===this.isInterval&&(this.listLoading=!0),this.statusArray.length>0?Object(g.h)(this.groupname,this.statusType,this.currentPage,this.limit,this.statusArray).then(function(e){t.listLoading=!1,Object(c.a)(e,function(e){t.assignAppStatusData(e)})}):Object(g.j)(this.groupname,this.statusType,this.currentPage,this.limit).then(function(e){t.listLoading=!1,Object(c.a)(e,function(e){t.assignAppStatusData(e)})})},getAppStatusHistoryBydevid:function(){var t=this;this.selectedAgentId||console.error("[getAppStatusHistoryBydevid]selectedAgentId is empty"),!1===this.isInterval&&(this.listLoading=!0),this.statusArray.length>0?Object(g.g)(this.selectedAgentId,this.statusType,this.currentPage,this.limit,this.statusArray).then(function(e){t.listLoading=!1,Object(c.a)(e,function(e){t.assignAppStatusData(e)})}):Object(g.i)(this.selectedAgentId,this.statusType,this.currentPage,this.limit).then(function(e){t.listLoading=!1,Object(c.a)(e,function(e){t.assignAppStatusData(e)})})},assignAppStatusData:function(t){if("[object Object]"===Object.prototype.toString.call(t)&&"[object Array]"===Object.prototype.toString.call(t.data)){this.dataCount=t.count,this.pkgStatusHistoryTableList=t.data,this.isshow=this.dataCount>this.limit,this.isShowBtnGroup=this.dataCount>0;var e=!0;this.statusType==h.h&&this.$emit("getStatusCount"),t.data.forEach(function(t){0==t.status&&(e=!1)}),e&&(this.$emit("isFinished"),window.clearInterval(_g.timer),_g.timer=null)}else window.clearInterval(_g.timer),_g.timer=null},intervalGetDockerStatusHistory:function(){var t=this;this.statusType==h.h?(this.getAppStatusHistoryByGroupname(),null===_g.timer&&(_g.timer=window.setInterval(function(){t.getAppStatusHistoryByGroupname(),t.isInterval=!0},this.intervalTime))):(this.getAppStatusHistoryBydevid(),null===_g.timer&&(_g.timer=window.setInterval(function(){t.getAppStatusHistoryBydevid(),t.isInterval=!0},this.intervalTime)))},filterStatus:function(t){this.statusArray=t.status,this.currentPage=1,_g.isArray(this.statusArray)&&this.intervalGetDockerStatusHistory()},resetAppSensor:function(t,e,a){var i=this;this.listLoading=!0,Object(d.g)(e,t,a).then(function(t){i.listLoading=!1,Object(c.a)(t,function(t){"CHANGED"==t.status?(i.activeName="appStatusHistory",i.currentPage=1,i.intervalGetDockerStatusHistory()):_g.handleError(t)})})},reinstall:function(t){var e=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("dockerControl.repeat"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){if(a){var i={taskname:t.taskname,filename:t.filename,projectname:t.pkgname,version:t.versionname,downloadpath:t.address};e.resetAppSensor(t.target,t.deviceId,i)}})},isSuccess:function(t){t&&this.intervalGetDockerStatusHistory()},clearAll:function(){var t=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.clearAll"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(e){e&&(t.clearLoading=!0,t.statusType==h.h?Object(g.c)(t.groupname,t.statusType).then(function(e){t.clearLoading=!1,Object(c.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.intervalGetDockerStatusHistory()}):_g.handleError(e)})}):Object(g.b)(t.selectedAgentId,t.statusType).then(function(e){t.clearLoading=!1,Object(c.a)(e,function(e){"CHANGED"===e.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.intervalGetDockerStatusHistory()}):_g.handleError(e)})}))})},initData:function(){this.pkgStatusHistoryTableList=[],this.isShowBtnGroup=!1,this.isshow=!1,this.isInterval=!1,this.currentPage=1}},created:function(){this.statusType==h.h&&this.$emit("getStatusCount")},beforeDestroy:function(){window.clearInterval(_g.timer),_g.timer=null},watch:{groupname:function(t){t&&(this.initData(),this.checkAppStatusData(),this.intervalGetDockerStatusHistory())},selectedAgentId:function(t){t&&(this.initData(),this.checkAppStatusData(),this.intervalGetDockerStatusHistory())}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"pkgStatusHistoryTable",staticStyle:{width:"100%"},attrs:{data:t.pkgStatusHistoryTableList,"tooltip-effect":"dark","default-sort":{prop:"ts",order:"descending"}},on:{"selection-change":t.selectItem,"filter-change":t.filterStatus}},[i("el-table-column",{attrs:{type:"selection","min-width":"50",selectable:t.checkSelectable}}),t._v(" "),i("el-table-column",{attrs:{prop:"devname",label:t.$t("dockerControl.deviceName"),"min-width":"120"}}),t._v(" "),t.statusType==t.batchDockerType?i("el-table-column",{attrs:{prop:"taskname",label:t.$t("dockerControl.taskName"),"min-width":"120"}}):t._e(),t._v(" "),i("el-table-column",{attrs:{prop:"pkgname",label:t.$t("dockerControl.projectName"),"min-width":"140"}}),t._v(" "),i("el-table-column",{attrs:{prop:"versionname",label:t.$t("dockerControl.version"),"min-width":"100"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("dockerControl.beginTime"),"min-width":"130",prop:"ts"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("time")(e.row.ts))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"target",label:t.$t("dockerControl.function"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("appStatusFunction")(e.row.target))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{"column-key":"status",prop:"status",label:t.$t("dockerControl.installStatus"),"min-width":"140",filters:[{text:t.$t("global.success"),value:2},{text:t.$t("global.failed"),value:1},{text:t.$t("global.running"),value:0}],"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?i("img",{staticStyle:{width:"50px",height:"10px"},attrs:{src:a("PLes"),alt:""}}):t._e(),t._v(" "),2==e.row.status?i("span",{staticClass:"badge bg-green"},[t._v(t._s(t.$t("global.success")))]):t._e(),t._v(" "),1==e.row.status?i("span",{staticClass:"badge bg-DimGray"},[t._v(t._s(t.$t("global.failed")))]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("dockerControl.errorStatus"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("appErrorStatus")(""+e.row.errorcode))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("dockerControl.action"),"min-width":"175",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("el-button-group",[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteHistory(e.row.aisid)}}},[t._v("\n                                "+t._s(t.$t("global.delete"))+"\n                        ")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",disabled:1!=e.row.status},on:{click:function(a){t.reinstall(e.row)}}},[t._v("\n                                "+t._s(t.$t("dockerControl.repeat"))+"\n                        ")])],1)],1)]}}])})],1),t._v(" "),i("btn-group",{directives:[{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf",attrs:{selectedData:t.multipleSelection,isDelete:!0,isMove:!1,tid:"aisid",delApi:t.batchDeleteAppStatusHistory},on:{result:t.isSuccess}}),t._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.clearLoading,expression:"clearLoading"},{name:"show",rawName:"v-show",value:t.isShowBtnGroup,expression:"isShowBtnGroup"}],staticClass:"fl m-t-10 cf m-l-10",attrs:{size:"small",type:"primary"},on:{click:function(e){t.clearAll()}}},[t._v("\n    "+t._s(t.$t("dockerControl.clearAll"))+"\n    ")]),t._v(" "),i("div",{staticClass:"m-t-10 cf fr"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount,background:""},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var v=a("C7Lr")(m,f,!1,function(t){a("jBLt")},"data-v-8cf2b50c",null).exports,b={name:"singledockerControl",data:function(){return{activeName:"dockerMarket",dockerTableData:[],dockerData:[],singleDockerType:h.F,listLoading:!1,yamlLoading:!1,keywords:"",content:"",dialogYamlVisible:!1,dialogDockerVisible:!1,dockerAvailable:!1,swarmAvailable:!1}},props:{selectedAgentId:{type:String,default:""},isSingleMode:{type:Boolean,default:!0},isOffline:{type:Boolean,default:!1}},components:{dockerHistory:v,editor:a("xds+")},methods:{getSensorStatus:function(){var t=this;if(this.isSingleMode)if(""!=this.selectedAgentId){var e=[],a=[];this.listLoading=!0,Object(d.e)(this.selectedAgentId,r.i.getDockerInfo).then(function(i){t.listLoading=!1,Object(c.a)(i,function(i){if("CONTENT"==i.status){if(i.content.value){var s=JSON.parse(i.content.value),n=[];s&&(n=s.data),"[object Array]"===Object.prototype.toString.call(n)&&n.forEach(function(t){var i={type:"uninstall",filename:"",projectname:t.tag,version:t.version,address:"",dockerData:t.docker,ftype:t.type,control:t.control};e.push(i),a.push(i)})}t.getRepoDockers(e,a)}})})}else console.error("selectAgentId is empty");else console.error("Cannot operate in a batch mode")},getDockerStatus:function(){var t=this;this.isSingleMode?""!=this.selectedAgentId?(this.listLoading=!0,Object(d.e)(this.selectedAgentId,r.f.deviceCapacity).then(function(e){t.listLoading=!1,Object(c.a)(e,function(e){if("CONTENT"==e.status&&e.content.value){var a=JSON.parse(e.content.value);t.dockerAvailable="true"==a.docker,t.swarmAvailable="true"==a["docker.swarm"]}})})):console.error("selectAgentId is empty"):console.error("Cannot operate in a batch mode")},actionSwarm:function(t){var e=this;""!=this.selectedAgentId?_g.swalWarnDo(this.$t("global.areYouSure"),this.$t("dockerControl."+t),this.$t("global.confirm"),this.$t("global.cancel")).then(function(a){if(a){var i={value:e.swarmAvailable};Object(d.h)(e.selectedAgentId,r.i[t],l()(i),!0).then(function(t){Object(c.a)(t,function(t){"CHANGED"==t.status?e.$swal("",e.$t("global.success"),"success",{button:e.$t("global.confirm")}).then(function(){}):(_g.handleError(t),e.swarmAvailable=!e.swarmAvailable)})})}else e.swarmAvailable=!e.swarmAvailable}):console.error("selectAgentId is empty")},removeObjInArray:function(t,e){"[object Array]"===Object.prototype.toString.call(t)?t.forEach(function(a,i){a.package===e&&t.splice(i,1)}):console.error("data is not array")},getRepoDockers:function(t,e){var a=this;if("[object Array]"==Object.prototype.toString.call(t)&&"[object Array]"==Object.prototype.toString.call(e)){var i={},s={};this.listLoading=!0,Object(u.a)().then(function(n){a.listLoading=!1,Object(c.a)(n,function(n){if("success"===n.status){"[object Array]"===Object.prototype.toString.call(n.data)&&n.data.forEach(function(a){null!=a.versionName&&a.versionName;i={type:"install",filename:a.filename,projectname:a.tag,version:a.version,address:a.address,dockerData:a.repoDockers,ftype:a.type},t.push(i),e.forEach(function(i,n){a.tag===i.projectname&&(t.pop(),e[n].address=a.address,e[n].ftype=a.type,_g.cpr_version(a.version,i.version)&&(s={type:"upgrade",filename:a.filename,projectname:a.tag,version:a.version,address:a.address,dockerData:i.dockerData,ftype:a.type},t.push(s)))})})}a.dockerTableData=t.reverse()})})}else console.error("getRepoDockers　parameter is not array")},filterType:function(t,e){return e.type===t},actionAppSensor:function(t,e){var a=this;void 0!==r.i[t]?this.selectedAgentId?_g.swalWarnDo(this.$t("global.areYouSure"),this.$t("dockerControl."+t),this.$t("global.confirm"),this.$t("global.cancel")).then(function(i){i&&(_g.openGlobalLoading(),Object(d.b)(a.selectedAgentId,r.i[t],e).then(function(t){Object(c.a)(t,function(t){"CHANGED"==t.status?(a.activeName="dockerStatusHistory",a.$refs.dockerHistory.intervalGetDockerStatusHistory()):_g.handleError(t)})}))}):this.$swal("",this.$t("global.selectDevice"),"info",{button:this.$t("global.confirm")}):this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")})},setAppSensor:function(t,e){var a=this;void 0!==r.i[t]?e?""!=this.selectedAgentId?_g.swalWarnDo(this.$t("global.areYouSure"),this.$t("dockerControl."+t),this.$t("global.confirm"),this.$t("global.cancel")).then(function(i){i&&(_g.openGlobalLoading(),Object(d.h)(a.selectedAgentId,r.i[t],e).then(function(t){Object(c.a)(t,function(t){"CHANGED"==t.status?a.$swal("",a.$t("global.success"),"success",{button:a.$t("global.confirm")}).then(function(){a.getSensorStatus()}):_g.handleError(t)})}))}):this.$swal("",this.$t("global.selectDevice"),"info",{button:this.$t("global.confirm")}):console.error("setSensorVal is null"):this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")})},isFinished:function(){this.selectedAgentId&&(this.isOffline||this.getSensorStatus())},appAction:function(t,e){var a={taskname:this.singleDockerType+(new Date).getTime(),filename:e.filename,projectname:e.projectname,version:e.version,downloadpath:e.address};this.actionAppSensor(t,a)},initData:function(){this.dockerTableData=[],this.dockerAvailable=!1,this.swarmAvailable=!1},handleClick:function(t){"dockerStatusHistory"===t.name?this.$emit("isDisabled",!1):this.$emit("isDisabled",!0)},editorInit:function(){a("aDfU"),a("sYys"),a("hww6"),a("y9Ym"),a("J4HJ"),a("2LVu")},showYmlContent:function(t){var e=this;this.address=t.address,this.dialogYamlVisible=!0,this.yamlLoading=!0,Object(u.b)(this.address).then(function(t){e.yamlLoading=!1,Object(c.a)(t,function(t){"success"===t.status&&(e.content=t.data)})})},showDeviceYmlContent:function(t){var e=this;this.dialogYamlVisible=!0;var a={};a.productname=t.projectname,a.version=t.version,this.yamlLoading=!0,Object(d.e)(this.selectedAgentId,r.h.getComposeContent,a).then(function(t){e.yamlLoading=!1,Object(c.a)(t,function(t){"CONTENT"==t.status&&(e.content=t.content.value)})})},showDockerList:function(t){this.dockerData=[],this.dockerData=t,this.dialogDockerVisible=!0}},watch:{isSingleMode:function(t){t&&this.initData()},selectedAgentId:function(t){this.isSingleMode&&(this.initData(),t&&!this.isOffline&&(this.getSensorStatus(),this.getDockerStatus()))}},computed:{isShowSearchInput:function(){return"dockerMarket"===this.activeName}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSingleMode,expression:"isSingleMode"}]},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"table-box m-b-10 p-b-5"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[i("el-form-item",{attrs:{label:t.$t("label.dockerStatus")}},[t.dockerAvailable?i("span",{staticClass:"c-success bold m-r-10"},[t._v(t._s(t.$t("global.running")))]):i("span",{staticClass:"c-danger bold m-r-10"},[t._v(t._s(t.$t("global.stop")))])]),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.dockerAvailable,expression:"dockerAvailable"}],attrs:{label:t.$t("label.swarmSwitch")}},[i("el-switch",{on:{change:function(e){t.actionSwarm("switchSwarmCapacity")}},model:{value:t.swarmAvailable,callback:function(e){t.swarmAvailable=e},expression:"swarmAvailable"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"p-r table-box"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSearchInput,expression:"isShowSearchInput"}],staticClass:"search"},[i("el-input",{staticClass:"w-250 m-l-10",attrs:{size:"small",placeholder:t.$t("dockerControl.keywordHolder")},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._v(" "),i("i",{staticClass:"fa fa-search search-icon",attrs:{"aria-hidden":"true"}})],1),t._v(" "),i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{name:"dockerMarket"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-sellsy m-r-5",attrs:{"aria-hidden":"listLoading"}}),t._v("\n                    "+t._s(t.$t("dockerControl.dockerMarket"))+"\n                    "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.$t("dockerControl.dockerDeployTooltip"),placement:"top-start"}},[i("i",{staticClass:"fa fa-question-circle tooltip m-l-5",attrs:{"aria-hidden":"true"}})])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dockerTableData.filter(function(e){return!t.keywords||e.projectname.toLowerCase().includes(t.keywords.toLowerCase())}),"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{label:"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("div",[i("img",{staticStyle:{width:"48px"},attrs:{src:a("J0bX"),alt:"no img"}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"projectname",label:t.$t("dockerControl.projectName"),"min-width":"120",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"version",label:t.$t("dockerControl.version"),"min-width":"120",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"ftype",label:t.$t("dockerControl.type"),"min-width":"120",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("dockerControl.view"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",["uninstall"!=e.row.type?i("i",{staticClass:"fa fa-eye pointer c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){t.showYmlContent(e.row)}}}):t._e(),t._v(" "),"uninstall"===e.row.type&&"Limited"==e.row.control?i("i",{staticClass:"fa fa-eye pointer c-darkgray",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),"uninstall"===e.row.type&&"Limited"!=e.row.control?i("i",{staticClass:"fa fa-eye pointer c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){t.showDeviceYmlContent(e.row)}}}):t._e()])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("dockerControl.status"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("i",{staticClass:"fa fa-list-ul pointer c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){t.showDockerList(e.row.dockerData)}}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"type",label:t.$t("dockerControl.action"),"min-width":"120",filters:[{text:t.$t("dockerControl.uninstall"),value:"uninstall"},{text:t.$t("dockerControl.install"),value:"install"},{text:t.$t("dockerControl.upgrade"),value:"upgrade"}],"filter-method":t.filterType,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("span",["Swarm"==e.row.ftype?i("el-button-group",["uninstall"===e.row.type?i("el-button",{attrs:{size:"small",type:"danger",disabled:!t.swarmAvailable},on:{click:function(a){t.appAction("uninstallSwarm",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.uninstall"))+"\n                                        ")]):t._e(),t._v(" "),"upgrade"===e.row.type?i("el-button",{attrs:{size:"small",type:"warning",disabled:!t.swarmAvailable},on:{click:function(a){t.appAction("upgradeSwarm",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.upgrade"))+"\n                                        ")]):t._e(),t._v(" "),"install"===e.row.type?i("el-button",{attrs:{size:"small",type:"primary",disabled:!t.swarmAvailable},on:{click:function(a){t.appAction("installSwarm",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.install"))+"\n                                        ")]):t._e()],1):i("el-button-group",["uninstall"===e.row.type?i("el-button",{attrs:{size:"small",type:"danger",disabled:t.swarmAvailable||!t.dockerAvailable},on:{click:function(a){t.appAction("uninstall",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.uninstall"))+"\n                                        ")]):t._e(),t._v(" "),"upgrade"===e.row.type?i("el-button",{attrs:{size:"small",type:"warning",disabled:t.swarmAvailable||!t.dockerAvailable},on:{click:function(a){t.appAction("upgrade",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.upgrade"))+"\n                                        ")]):t._e(),t._v(" "),"install"===e.row.type?i("el-button",{attrs:{size:"small",type:"primary",disabled:t.swarmAvailable||!t.dockerAvailable},on:{click:function(a){t.appAction("install",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.install"))+"\n                                        ")]):t._e()],1)],1)])]}}])})],1)],1),t._v(" "),i("el-tab-pane",{attrs:{name:"dockerStatusHistory"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-history m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                    "+t._s(t.$t("dockerControl.dockerDeployHistory"))+"\n                ")]),t._v(" "),i("docker-history",{ref:"dockerHistory",attrs:{statusType:t.singleDockerType,selectedAgentId:t.selectedAgentId},on:{isFinished:t.isFinished}})],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogDockerVisible},on:{"update:visible":function(e){t.dialogDockerVisible=e}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"fa fa-list-ul m-r-10",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("dockerControl.status"))+"\n            ")]),t._v(" "),i("el-table",{attrs:{data:t.dockerData}},[i("el-table-column",{attrs:{property:"container",label:t.$t("dockerControl.container")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[t._v("\n                            "+t._s(t._f("none")(e.row.container))+"\n                        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"image",label:"image"}}),t._v(" "),i("el-table-column",{attrs:{property:"version",label:t.$t("dockerControl.version")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("\n                            "+t._s(t._f("none")(e.row.version))+"\n                        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"isRunning",label:t.$t("dockerControl.status"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isRunning?i("span",{class:{"c-success":"running"==e.row.isRunning}},[t._v(t._s(e.row.isRunning))]):i("span",[t._v("No Ready")])]}}])})],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogYamlVisible},on:{"update:visible":function(e){t.dialogYamlVisible=e}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"fa fa-file-text m-r-10",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("dockerControl.fileContent"))+"\n            ")]),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.yamlLoading,expression:"yamlLoading"}],staticClass:"text-center"},[i("editor",{attrs:{lang:"html",theme:"chrome",height:"550",options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,tabSize:2,fontSize:14,showPrintMargin:!1}},on:{init:t.editorInit},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogYamlVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))])],1)])],1)])},staticRenderFns:[]};var y=a("C7Lr")(b,k,!1,function(t){a("v+ne")},"data-v-5254fb3e",null).exports,w={name:"batchdockerControl",data:function(){var t=this;return{activeName:"dockerMarket",dockerTableData:[],dockerData:[],dialogTasknameVisible:!1,filename:"",projectname:"",version:"",address:"",dockerStatusForm:{taskname:""},rules:{taskname:{required:!0,validator:function(e,a,i){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,12}$/).test(a))return i(new Error(t.$t("global.verifyShortError")));i()},trigger:"blur"}},batchDockerType:h.h,cid:"",content:"",isShowOverview:!1,docker_taskname:"",success:0,installing:0,failed:0,listLoading:!1,yamlLoading:!1,keywords:"",dialogYamlVisible:!1,dialogDockerVisible:!1,swarmAvailable:!1,dockerAvailable:!1}},props:{selectedAgentsData:{type:Array,default:[]},groupname:{type:String,default:""},isSingleMode:{type:Boolean,default:!0}},components:{dockerHistory:v,editor:a("xds+")},methods:{getDockerStatus:function(){var t=this;0!=this.selectedAgentsData.length?(this.listLoading=!0,Object(d.e)(this.selectedAgentsData[0].value,r.f.deviceCapacity).then(function(e){t.listLoading=!1,Object(c.a)(e,function(e){if("CONTENT"==e.status&&e.content.value){var a=JSON.parse(e.content.value);t.dockerAvailable="true"==a.docker,t.swarmAvailable="true"==a["docker.swarm"]}})})):console.error("getSensorStatus: agentData is null")},handleCommand:function(t){var e=t.appInfo;this.cid=t.id,this.address=e.address,this.filename=e.filename,this.projectname=e.projectname,this.version=e.version,this.dockerStatusForm.taskname="",this.dialogTasknameVisible=!0},filterType:function(t,e){return e.type===t},getSensorStatus:function(){var t=this;if(this.isSingleMode)console.error("Cannot operate in a single mode");else if(0!=this.selectedAgentsData.length){var e=[],a=[];this.listLoading=!0,Object(d.e)(this.selectedAgentsData[0].value,r.i.getDockerInfo).then(function(i){t.listLoading=!1,Object(c.a)(i,function(i){if("CONTENT"==i.status){if(i.content.value){var s=JSON.parse(i.content.value),n=[];s&&(n=s.data),"[object Array]"===Object.prototype.toString.call(n)&&n.forEach(function(t){var i={type:"uninstall",filename:"",projectname:t.tag,version:t.version,address:"",dockerData:t.docker};e.push(i),a.push(i)})}t.getRepoDockers(e,a)}})})}else console.error("getSensorStatus: agentData is null")},removeObjInArray:function(t,e){"[object Array]"===Object.prototype.toString.call(t)?t.forEach(function(a,i){a.package===e&&t.splice(i,1)}):console.error("data is not array")},getRepoDockers:function(t,e){var a=this;if("[object Array]"==Object.prototype.toString.call(t)&&"[object Array]"==Object.prototype.toString.call(e)){var i={},s={};this.listLoading=!0,Object(u.a)().then(function(n){a.listLoading=!1,Object(c.a)(n,function(n){if("success"===n.status){"[object Array]"===Object.prototype.toString.call(n.data)&&n.data.forEach(function(a){i={type:"install",filename:a.filename,projectname:a.tag,version:a.version,address:a.address,dockerData:a.repoDockers,ftype:a.type},t.push(i),e.forEach(function(i,n){a.tag===i.projectname&&(t.pop(),e[n].address=a.address,e[n].ftype=a.type,_g.cpr_version(a.version,i.version)&&(s={type:"upgrade",filename:a.filename,projectname:a.tag,version:a.version,address:a.address,dockerData:i.dockerData,ftype:a.type},t.push(s)))})})}a.dockerTableData=t})})}else console.error("getRepoDockers　parameter is not array")},batchSetAppSensor:function(t,e){var a=this;if(void 0!==r.i[t]){_g.openGlobalLoading();var i={groupname:this.groupname,taskname:this.dockerStatusForm.taskname,filename:this.filename,projectname:this.projectname,version:this.version,downloadpath:e},s=this.dockerStatusForm.taskname;this.dialogTasknameVisible=!1,Object(d.a)(r.i[t],i).then(function(t){Object(c.a)(t,function(t){"CHANGED"==t.status?(Object(p.f)("docker_taskname",s),a.activeName="dockerStatusHistory",a.$refs.dockerHistory.intervalGetDockerStatusHistory()):_g.handleError(t)})})}else this.$swal("",this.$t("global.functionNotSupport"),"info",{button:this.$t("global.confirm")})},batchinstall:function(){var t=this;0!==this.selectedAgentsData.length?this.$refs.dockerStatusForm.validate(function(e){if(e){var a=t.address;t.batchSetAppSensor(t.cid,a)}}):this.$swal("",this.$t("global.devicesOffline"),"info",{button:this.$t("global.confirm")})},selectBatchinstall:function(t,e){this.cid=t,this.address=e.address,this.filename=e.filename,this.projectname=e.projectname,this.version=e.version,this.dockerStatusForm.taskname="",this.dialogTasknameVisible=!0},initDockerInfo:function(){this.filename="",this.projectname="",this.version="",this.address="",this.dockerStatusForm.taskname="",this.cid=""},getBatchAppStatusCount:function(){var t=this,e=Object(p.c)("docker_taskname");if(!e)return console.error("getBatchAppStatusCount:localStorage(docker_taskname) is null"),void(this.isShowOverview=!1);Object(g.k)(e,h.h).then(function(a){Object(c.a)(a,function(a){a&&(t.docker_taskname=e,t.installing=a.installing,t.failed=a.fail,t.success=a.success,t.total>0&&"dockerStatusHistory"===t.activeName?t.isShowOverview=!0:t.isShowOverview=!1)})})},initData:function(){this.dockerAvailable=!1,this.swarmAvailable=!1,this.dockerTableData=[]},handleClick:function(t){"dockerStatusHistory"===t.name?this.getBatchAppStatusCount():this.isShowOverview=!1},isFinished:function(){this.getSensorStatus()},editorInit:function(){a("aDfU"),a("sYys"),a("hww6"),a("y9Ym"),a("J4HJ"),a("2LVu")},showYmlContent:function(t){var e=this;this.address=t.address,this.dialogYamlVisible=!0,this.yamlLoading=!0,Object(u.b)(this.address).then(function(t){e.yamlLoading=!0,Object(c.a)(t,function(t){"success"===t.status&&(e.content=t.data)})})},showDeviceYmlContent:function(t){var e=this;this.dialogYamlVisible=!0;var a={};a.productname=t.projectname,a.version=t.version,this.yamlLoading=!0,Object(d.e)(this.selectedAgentId,r.h.getComposeContent,a).then(function(t){e.yamlLoading=!1,Object(c.a)(t,function(t){"CONTENT"==t.status&&(e.content=t.content.value)})})},showDockerList:function(t){this.dockerData=[],this.dockerData=t,this.dialogDockerVisible=!0}},computed:{isShowSearchInput:function(){return"dockerMarket"===this.activeName},total:function(){return this.success+this.installing+this.failed}},watch:{isSingleMode:function(t){t||this.initData()},groupname:function(t){!this.isSingleMode&&t&&(this.initData(),this.getSensorStatus(),this.getDockerStatus())}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSingleMode,expression:"!isSingleMode"}]},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"table-box m-b-10 p-b-5"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[i("el-form-item",{attrs:{label:t.$t("label.dockerStatus")}},[t.dockerAvailable?i("span",{staticClass:"c-success bold m-r-10"},[t._v(t._s(t.$t("global.running")))]):i("span",{staticClass:"c-danger bold m-r-10"},[t._v(t._s(t.$t("global.stop")))])]),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.dockerAvailable,expression:"dockerAvailable"}],attrs:{label:t.$t("label.swarmStatus")}},[t.swarmAvailable?i("span",{staticClass:"c-success bold m-r-10"},[t._v(t._s(t.$t("global.running")))]):i("span",{staticClass:"c-danger bold m-r-10"},[t._v(t._s(t.$t("global.stop")))])])],1)],1),t._v(" "),i("div",{staticClass:"pkgStatusContent p-r table-box"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSearchInput,expression:"isShowSearchInput"}],staticClass:"search"},[i("el-input",{staticClass:"w-250 m-l-10",attrs:{size:"small",placeholder:t.$t("dockerControl.keywordHolder")},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._v(" "),i("i",{staticClass:"fa fa-search search-icon",attrs:{"aria-hidden":"true"}})],1),t._v(" "),i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{name:"dockerMarket"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-sellsy m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                    "+t._s(t.$t("dockerControl.dockerMarket"))+"\n                    "),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.$t("dockerControl.dockerDeployTooltip"),placement:"top-start"}},[i("i",{staticClass:"fa fa-question-circle tooltip  m-l-5",attrs:{"aria-hidden":"true"}})])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dockerTableData.filter(function(e){return!t.keywords||e.projectname.toLowerCase().includes(t.keywords.toLowerCase())}),"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{label:"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("div",[i("img",{staticStyle:{width:"48px"},attrs:{src:a("J0bX"),alt:"no img"}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"projectname",label:t.$t("dockerControl.projectName"),"min-width":"120",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"version",label:t.$t("dockerControl.version"),"min-width":"120",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"ftype",label:t.$t("dockerControl.type"),"min-width":"120",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("dockerControl.view"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",["uninstall"!=e.row.type?i("i",{staticClass:"fa fa-eye pointer c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){t.showYmlContent(e.row)}}}):t._e(),t._v(" "),"uninstall"===e.row.type?i("i",{staticClass:"fa fa-eye pointer c-darkgray",attrs:{"aria-hidden":"true"},on:{click:function(a){t.showDeviceYmlContent(e.row)}}}):t._e()])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("dockerControl.status"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("i",{staticClass:"fa fa-list-ul pointer c-primary",attrs:{"aria-hidden":"true"},on:{click:function(a){t.showDockerList(e.row.dockerData)}}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"type",label:t.$t("dockerControl.action"),"min-width":"120",filters:[{text:t.$t("dockerControl.uninstall"),value:"uninstall"},{text:t.$t("dockerControl.install"),value:"install"},{text:t.$t("dockerControl.upgrade"),value:"upgrade"}],"filter-method":t.filterType,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("span",["Swarm"==e.row.ftype?i("el-button-group",["uninstall"===e.row.type?i("el-button",{attrs:{size:"small",type:"danger",disabled:!t.swarmAvailable},on:{click:function(a){t.selectBatchinstall("uninstallSwarm",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.uninstall"))+"\n                                        ")]):t._e(),t._v(" "),"upgrade"===e.row.type?i("el-button",{attrs:{size:"small",type:"warning",disabled:!t.swarmAvailable},on:{click:function(a){t.selectBatchinstall("upgradeSwarm",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.upgrade"))+"\n                                        ")]):t._e(),t._v(" "),"install"===e.row.type?i("el-button",{attrs:{size:"small",type:"primary",disabled:!t.swarmAvailable},on:{click:function(a){t.selectBatchinstall("installSwarm",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.install"))+"\n                                        ")]):t._e()],1):i("el-button-group",["uninstall"===e.row.type?i("el-button",{attrs:{size:"small",type:"danger",disabled:!t.dockerAvailable&&t.swarmAvailable},on:{click:function(a){t.selectBatchinstall("uninstall",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.uninstall"))+"\n                                        ")]):t._e(),t._v(" "),"upgrade"===e.row.type?i("el-button",{attrs:{size:"small",type:"warning",disabled:!t.dockerAvailable&&t.swarmAvailable},on:{click:function(a){t.selectBatchinstall("upgrade",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.upgrade"))+"\n                                        ")]):t._e(),t._v(" "),"install"===e.row.type?i("el-button",{attrs:{size:"small",type:"primary",disabled:!t.dockerAvailable&&t.swarmAvailable},on:{click:function(a){t.selectBatchinstall("install",e.row)}}},[t._v("\n                                            "+t._s(t.$t("dockerControl.install"))+"\n                                        ")]):t._e()],1)],1)])]}}])})],1)],1),t._v(" "),i("el-tab-pane",{attrs:{name:"dockerStatusHistory"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-history m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                    "+t._s(t.$t("dockerControl.dockerDeployHistory"))+"\n                ")]),t._v(" "),i("docker-history",{ref:"dockerHistory",attrs:{statusType:t.batchDockerType,groupname:t.groupname},on:{getStatusCount:t.getBatchAppStatusCount,isFinished:t.isFinished}})],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogTasknameVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTasknameVisible=e},close:function(e){t.initDockerInfo()}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"fa fa-level-up m-r-10"}),t._v("\n                "+t._s(t.$t("dockerControl.batchInstall"))+"\n            ")]),t._v(" "),i("el-form",{ref:"dockerStatusForm",attrs:{model:t.dockerStatusForm,rules:t.rules}},[i("el-form-item",{attrs:{label:t.$t("label.taskName"),"label-width":"230px",prop:"taskname"}},[i("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:t.$t("dockerControl.taskName")},model:{value:t.dockerStatusForm.taskname,callback:function(e){t.$set(t.dockerStatusForm,"taskname","string"==typeof e?e.trim():e)},expression:"dockerStatusForm.taskname"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogTasknameVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.batchinstall()}}},[t._v(t._s(t.$t("global.confirm")))])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogDockerVisible},on:{"update:visible":function(e){t.dialogDockerVisible=e}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"fa fa-list-ul m-r-10",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("dockerControl.status"))+"\n            ")]),t._v(" "),i("el-table",{attrs:{data:t.dockerData}},[i("el-table-column",{attrs:{property:"container",label:t.$t("dockerControl.container")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[t._v("\n                            "+t._s(t._f("none")(e.row.container))+"\n                        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"image",label:"image"}}),t._v(" "),i("el-table-column",{attrs:{property:"version",label:t.$t("dockerControl.version")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("\n                            "+t._s(t._f("none")(e.row.version))+"\n                        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"isRunning",label:t.$t("dockerControl.status"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isRunning?i("span",{class:{"c-success":"running"==e.row.isRunning}},[t._v(t._s(e.row.isRunning))]):i("span",[t._v("No Ready")])]}}])})],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogYamlVisible},on:{"update:visible":function(e){t.dialogYamlVisible=e}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"fa fa-file-text m-r-10",attrs:{"aria-hidden":"true"}}),t._v("\n                "+t._s(t.$t("dockerControl.fileContent"))+"\n            ")]),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.yamlLoading,expression:"yamlLoading"}],staticClass:"text-center"},[i("editor",{attrs:{lang:"html",theme:"chrome",height:"550",options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,tabSize:2,fontSize:14,showPrintMargin:!1}},on:{init:t.editorInit},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogYamlVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowOverview,expression:"isShowOverview"}],staticClass:"appStatusCount"},[i("span",[t._v(t._s(t.$t("label.taskName"))+" "+t._s(t.docker_taskname))]),t._v(" "),i("span",[t._v(t._s(t.$t("dockerControl.total"))+" "+t._s(t.total))]),t._v(" "),i("span",[t._v(t._s(t.$t("dockerControl.deploying"))+" "+t._s(t.installing))]),t._v(" "),i("span",[t._v(t._s(t.$t("dockerControl.success"))+" "+t._s(t.success))]),t._v(" "),i("span",[t._v(t._s(t.$t("dockerControl.failed"))+" "+t._s(t.failed))])])],1)])},staticRenderFns:[]};var C=a("C7Lr")(w,S,!1,function(t){a("Tisq")},"data-v-5b0ddfbd",null).exports,A={name:"dockercontrol",data:function(){return{selectedAgentId:"",selectedAgentsData:[],isSingleMode:!0,groupname:"",isDisabledOffDev:!0,isOffline:!1,groupType:h.u.linux,groupTypeArray:[h.u.linux,h.u.windows]}},components:{selectDevice:i.a,selectGroup:n.a,modeSwitch:s.a,singleControl:y,batchControl:C},methods:{getDeviceOption:function(t){this.selectedAgentId=t},getGroupOption:function(t){this.selectedAgentsData=t},initData:function(){this.selectedAgentId="",this.groupname="",this.selectedAgentsData=[]},changeMode:function(t){this.initData(),this.isSingleMode=!t},getGroupName:function(t){this.groupname=t},isDisabled:function(t){this.isDisabledOffDev=t},isOfflineDev:function(t){this.isOffline=t}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-box"},[a("div",{staticClass:"title-box"},[a("p",{staticClass:"header-line"},[a("i",{staticClass:"fa fa-sliders m-r-10"}),t._v("\n            "+t._s(t.$t("dockerControl.dockerDeploy"))+"\n            \n        ")])]),t._v(" "),a("div",{staticClass:"select-box"},[a("mode-switch",{on:{"mode-status":t.changeMode}}),t._v(" "),a("span",{staticClass:"vertical"}),t._v(" "),a("select-group",{attrs:{isSingleMode:t.isSingleMode,groupType:t.groupTypeArray},on:{"select-getDeviceOptions":t.getGroupOption,"select-getGroupName":t.getGroupName}}),t._v(" "),a("select-device",{attrs:{isSingleMode:t.isSingleMode,isDisabledOffDev:t.isDisabledOffDev,groupTypeArray:t.groupTypeArray},on:{"select-device":t.getDeviceOption,isOfflineDev:t.isOfflineDev}})],1),t._v(" "),a("div",[a("single-control",{attrs:{selectedAgentId:t.selectedAgentId,isSingleMode:t.isSingleMode,isOffline:t.isOffline},on:{isDisabled:t.isDisabled}}),t._v(" "),a("batch-control",{attrs:{selectedAgentsData:t.selectedAgentsData,isSingleMode:t.isSingleMode,groupname:t.groupname}})],1)])},staticRenderFns:[]};var _=a("C7Lr")(A,D,!1,function(t){a("ALGA")},"data-v-f05726ce",null);e.default=_.exports},"v+ne":function(t,e){}});
//# sourceMappingURL=9.8aec61d6af134a7204d6.js.map