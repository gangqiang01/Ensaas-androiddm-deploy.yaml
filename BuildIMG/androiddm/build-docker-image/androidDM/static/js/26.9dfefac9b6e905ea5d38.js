webpackJsonp([26],{"o/y8":function(t,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=i("aA9S"),n=i.n(e),a=i("rVsN"),l=i.n(a),s=i("5Y2G"),r=function(t){return new l.a(function(o,i){var e={name:t};Object(s.b)("/api/solutionApp/byname",e).then(function(t){o(t)}).catch(function(t){o(t.response)})})},p=(i("YMj5"),i("jnx8")),u=i("22O3"),d=i("/eZD"),c=i("OT2R"),m={name:"solutionAppList",data:function(){var t=this,o=function(o,i,e){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,12}$/).test(i))return e(new Error(t.$t("global.verifyShortError")));e()},i=function(o,i,e){if(!new RegExp(/^(?![._-\s])[\u4E00-\u9FA5A-Za-z0-9_\-\.\s]{1,48}$/).test(i))return e(new Error(t.$t("global.verifyDescriptionError")));e()},e=function(o,i,e){if(!new RegExp(/^([a-zA-Z]+[.][a-zA-Z]+)[.]*.*/).test(i)&&0!=i.length)return e(new Error(t.$t("global.verifyPkgError")));e()};return{formLabelWidth:"200px",dialogEditSolutionAppVisible:!1,dialogAddSolutionAppVisible:!1,selectedSolutionAppName:"",solutionAppData:[],solutionAppForm:{name:"",appname:"",url:"",description:""},addSolutionAppForm:{addName:"",addPkgname:"",addUrl:"http://",addDescription:""},rules:{name:{required:!0,validator:o,trigger:"blur"},url:{required:!0,trigger:"blur"},appname:{required:!0,validator:e,trigger:"blur"},description:{required:!0,validator:i,trigger:"blur"},addUrl:{required:!0,trigger:"blur"},addName:{required:!0,validator:o,trigger:"blur"},addPkgname:{required:!0,validator:e,trigger:"blur"},addDescription:{required:!0,validator:i,trigger:"blur"}},solutionAppIcon:null,defaultImg:'this.src="static/imgs/solution.png"'}},components:{cardTemp:i("yeZF").a},methods:{dispatchUploadFile:function(){this.$refs.filElem.dispatchEvent(new MouseEvent("click"))},getIconFile:function(t){this.solutionAppIcon=null;var o=t.target.files[0],i=o.name.toLowerCase();/\.(jpg|jpeg|png|bmp)$/.test(i)?o.size>d.M?this.$swal("",this.$t("solutionApp.solutionAppIconSizeInfo"),"info",{button:this.$t("global.confirm")}):this.solutionAppIcon=t.target.files[0]:this.$swal("",this.$t("solutionApp.solutionAppIconInfo"),"info",{button:this.$t("global.confirm")})},getAllSolutionApps:function(){var t=this;_g.openGlobalLoading(),new l.a(function(t,o){Object(s.b)("/api/solutionApp").then(function(o){t(o)}).catch(function(o){t(o.response)})}).then(function(o){Object(p.a)(o,function(o){"[object Array]"===Object.prototype.toString.call(o)&&(t.solutionAppData=o)})})},addClick:function(){this.dialogAddSolutionAppVisible=!0},getSrc:function(t,o){return o?"api/solutionApp/getIconByName/"+t:"static/imgs/solution.png"},initEditInfo:function(){n()(this.$data.solutionAppForm,this.$options.data().solutionAppForm)},initAddInfo:function(){n()(this.$data.addSolutionAppForm,this.$options.data().addSolutionAppForm),this.solutionAppIcon=null},editSolutionApp:function(){var t=this;this.$refs.solutionAppForm.validate(function(o){var i,e,n,a,r;o&&(t.dialogEditSolutionAppVisible=!1,(i=t.selectedSolutionAppName,e=t.solutionAppForm.name,n=t.solutionAppForm.description,a=t.solutionAppForm.url,r=t.solutionAppForm.appname,new l.a(function(t,o){var l={oldname:i,name:e,desc:n,url:a,pkgname:r};Object(s.e)("/api/solutionApp/byname",l).then(function(o){t(o)}).catch(function(o){t(o.response)})})).then(function(o){Object(p.a)(o,function(o){"CHANGED"===o.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.getAllSolutionApps()}):_g.handleError(o)})}))})},editClick:function(t){var o=this;r(t).then(function(t){Object(p.a)(t,function(t){_g.isObject(t)&&(o.solutionAppForm=t)})}),this.selectedSolutionAppName=t,this.dialogEditSolutionAppVisible=!0},deleteSolutionApp:function(t){var o=this;_g.swalInfoDo(this.$t("global.areYouSure"),this.$t("global.delete"),this.$t("global.confirm"),this.$t("global.cancel")).then(function(i){var e;i&&(e=t,new l.a(function(t,o){Object(s.a)("/api/solutionApp/"+e).then(function(o){t(o)}).catch(function(o){t(o.response)})})).then(function(t){Object(p.a)(t,function(t){"CHANGED"===t.status?o.$swal("",o.$t("global.success"),"success",{button:o.$t("global.confirm")}).then(function(){o.getAllSolutionApps()}):_g.handleError(t)})})})},addSolutionApp:function(){var t=this;if(Object(u.b)("username")){var o=Object(u.d)("username");this.$refs.addSolutionAppForm.validate(function(i){i&&(t.dialogAddSolutionAppVisible=!1,function(t,o,i){var e=i.addName,n=i.addUrl,a=i.addDescription,r=i.addPkgname;console.log(t);var p=new FormData;p.append("solutionAppIcon",o),p.append("name",e),p.append("desc",a),p.append("url",n),p.append("username",t),p.append("appname",r);var u={headers:{"Content-Type":"multipart/form-data"}};return new l.a(function(t,o){Object(s.d)("/api/solutionApp/add",p,u).then(function(o){t(o)}).catch(function(o){t(o.response)})})}(o,t.solutionAppIcon,t.addSolutionAppForm).then(function(o){Object(p.a)(o,function(o){"CHANGED"===o.status?t.$swal("",t.$t("global.success"),"success",{button:t.$t("global.confirm")}).then(function(){t.getAllSolutionApps()}):_g.handleError(o)})}))})}else this.$swal("",this.$t("global.loginExpired"),"info",{button:this.$t("global.confirm")}).then(function(){t.$router.replace("/")})},handleCommand:function(t){var o=this;switch(t.id){case"delete":this.deleteSolutionApp(t.info.said);break;case"edit":var i=t.info.name;n()(this.$data.solutionAppForm,this.$options.data().solutionAppForm),r(i).then(function(t){Object(p.a)(t,function(t){_g.isObject(t)&&(o.solutionAppForm=t)})}),this.selectedSolutionAppName=i,this.dialogEditSolutionAppVisible=!0;break;case"redirect":var e=t.info.url,a="",l=new RegExp(/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/),s=window.open("about:blank");l.test(e)?(a=e,s.location.href=a):getSolutionAppServiceApi().then(function(t){a=0==e.indexOf("/")?t+e:t+"/"+e,s.location.href=a})}},redirect:function(t){var o=this;if(t){var i="";new RegExp(/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/).test(t)?(i=t,this.$router.push({name:"solutionAppPage",params:{solutionPageUrl:i}})):getSolutionAppServiceApi().then(function(e){i=0==t.indexOf("/")?e+t:e+"/"+t,o.$router.push({name:"solutionAppPage",params:{solutionPageUrl:i}})})}},getConfiguration:function(){var t=this;Object(u.b)("username")?(this.username=Object(u.d)("username"),Object(c.e)(this.username).then(function(o){Object(p.a)(o,function(o){o.bloburl||t.$message.error(t.$t("configuration.errorInfo"))})})):this.$swal("",this.$t("global.loginExpired"),"info",{button:this.$t("global.confirm")}).then(function(){t.$router.replace("/")})}},computed:{filename:function(){return this.solutionAppIcon?this.solutionAppIcon.name:""},fileListIsShow:function(){return!!this.solutionAppIcon},desc:function(){return"name"}},created:function(){this.getAllSolutionApps(),this.getConfiguration()}},f={render:function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",[i("p",{staticClass:"header-line"},[i("i",{staticClass:"fa fa-sliders m-r-10",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.$t("solutionApp.solutionAppManager"))+"\n    ")]),t._v(" "),i("card-temp",{attrs:{data:t.solutionAppData,bodyDesc:t.desc,isCommon:!0,isShowAdd:!0,headerBg:"#eeffee"},on:{addCard:t.addClick},scopedSlots:t._u([{key:"card-header",fn:function(o){return i("div",{staticClass:"card-header cf"},[i("el-dropdown",{staticClass:"fr pointer",attrs:{trigger:"click",size:"small"},on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"fa fa-ellipsis-v",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:{info:o.item,id:"edit"}}},[i("i",{staticClass:"fa fa-pencil-square-o m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                        "+t._s(t.$t("global.rename"))+"\n                    ")]),t._v(" "),i("el-dropdown-item",{attrs:{command:{info:o.item,id:"delete"}}},[i("i",{staticClass:"fa fa-trash-o m-r-7",attrs:{"aria-hidden":"true"}}),t._v("\n                        "+t._s(t.$t("global.delete"))+"\n                    ")]),t._v(" "),i("el-dropdown-item",{attrs:{command:{info:o.item,id:"redirect"},disabled:""===o.item.url}},[i("i",{staticClass:"fa fa-paper-plane-o m-r-5",attrs:{"aria-hidden":"true"}}),t._v("\n                        "+t._s(t.$t("solutionApp.redirect"))+"\n                    ")])],1)],1)],1)}},{key:"card-body-img",fn:function(o){return i("div",{staticClass:"icon pointer",on:{click:function(i){t.redirect(o.item.url)}}},[i("img",{staticStyle:{width:"67px",height:"67px"},attrs:{src:t.getSrc(o.item.name,o.item.iconAddress),onerror:t.defaultImg,alt:"no img"}})])}}])}),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogEditSolutionAppVisible},on:{"update:visible":function(o){t.dialogEditSolutionAppVisible=o},close:function(o){t.initEditInfo()}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"fa fa-pencil-square-o m-r-10",attrs:{"aria-hidden":"true"}}),t._v("\n            "+t._s(t.$t("solutionApp.editSolution"))+"\n        ")]),t._v(" "),i("el-form",{ref:"solutionAppForm",attrs:{model:t.solutionAppForm,rules:t.rules}},[i("el-form-item",{attrs:{label:t.$t("label.solutionName"),"label-width":t.formLabelWidth,prop:"name"}},[i("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off"},model:{value:t.solutionAppForm.name,callback:function(o){t.$set(t.solutionAppForm,"name",o)},expression:"solutionAppForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("label.solutionAppPkgName"),"label-width":t.formLabelWidth,prop:"appname"}},[i("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:t.$t("solutionApp.inputSolutionAppPkgHolder")},model:{value:t.solutionAppForm.appname,callback:function(o){t.$set(t.solutionAppForm,"appname",o)},expression:"solutionAppForm.appname"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("label.solutionAppUrl"),"label-width":t.formLabelWidth,prop:"url"}},[i("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off"},model:{value:t.solutionAppForm.url,callback:function(o){t.$set(t.solutionAppForm,"url",o)},expression:"solutionAppForm.url"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(o){t.dialogEditSolutionAppVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(o){t.editSolutionApp()}}},[t._v(t._s(t.$t("global.confirm")))])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogAddSolutionAppVisible},on:{"update:visible":function(o){t.dialogAddSolutionAppVisible=o},close:function(o){t.initAddInfo()}}},[i("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"fa fa-plus-square-o m-r-10",attrs:{"aria-hidden":"true"}}),t._v("\n            "+t._s(t.$t("solutionApp.addSolution"))+"\n        ")]),t._v(" "),i("el-form",{ref:"addSolutionAppForm",attrs:{model:t.addSolutionAppForm,rules:t.rules}},[i("el-form-item",{attrs:{label:t.$t("label.solutionName"),"label-width":t.formLabelWidth,prop:"addName"}},[i("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:t.$t("solutionApp.inputSolutionAppNameHolder")},model:{value:t.addSolutionAppForm.addName,callback:function(o){t.$set(t.addSolutionAppForm,"addName",o)},expression:"addSolutionAppForm.addName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("label.solutionAppPkgName"),"label-width":t.formLabelWidth,prop:"addPkgname"}},[i("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:t.$t("solutionApp.inputSolutionAppPkgHolder")},model:{value:t.addSolutionAppForm.addPkgname,callback:function(o){t.$set(t.addSolutionAppForm,"addPkgname",o)},expression:"addSolutionAppForm.addPkgname"}})],1),t._v(" "),i("p",{staticClass:"note"},[i("i",[t._v(t._s(t.$t("solutionApp.note")))]),t._v("\n                "+t._s(t.$t("solutionApp.noteContent"))+"\n            ")]),t._v(" "),i("el-form-item",{attrs:{label:t.$t("label.solutionAppUrl"),"label-width":t.formLabelWidth,prop:"addUrl"}},[i("el-input",{staticClass:"max-w-350",attrs:{autocomplete:"off",placeholder:t.$t("solutionApp.inputSolutionAppUrlHolder")},model:{value:t.addSolutionAppForm.addUrl,callback:function(o){t.$set(t.addSolutionAppForm,"addUrl",o)},expression:"addSolutionAppForm.addUrl"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("label.uploadSolutionAppIcon"),"label-width":t.formLabelWidth,prop:"solutionAppIcon"}},[i("div",{staticClass:"uploadBtn "},[i("el-button",{staticClass:"m-r-10",attrs:{size:"mini",type:"primary"},on:{click:function(o){t.dispatchUploadFile()}}},[i("i",{staticClass:"fa fa-cloud-upload m-r-10"}),t._v(t._s(t.$t("solutionApp.upload")))]),t._v(" "),i("input",{ref:"filElem",attrs:{type:"file",name:"solutionAppIcon"},on:{change:function(o){t.getIconFile(o)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.fileListIsShow,expression:"fileListIsShow"}],staticClass:"fileList"},[i("i",{staticClass:"fa fa-file-text-o m-r-10"}),t._v(" "+t._s(t.filename)+"\n                    ")])],1)])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(o){t.dialogAddSolutionAppVisible=!1}}},[t._v(t._s(t.$t("global.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.addSolutionApp}},[t._v(t._s(t.$t("global.confirm")))])],1)],1)],1)},staticRenderFns:[]};var A=i("C7Lr")(m,f,!1,function(t){i("rDjY")},"data-v-c1bd466e",null);o.default=A.exports},rDjY:function(t,o){}});
//# sourceMappingURL=26.9dfefac9b6e905ea5d38.js.map